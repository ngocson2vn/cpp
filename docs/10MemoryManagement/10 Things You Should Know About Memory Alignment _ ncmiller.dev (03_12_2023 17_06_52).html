<!DOCTYPE html> <html lang=en style><!--
 Page saved with SingleFile 
 url: https://ncmiller.dev/memory-alignment.html 
 saved date: Sun Dec 03 2023 17:06:52 GMT+0800 (Singapore Standard Time)
--><meta charset=utf-8>
<meta http-equiv=X-UA-Compatible content="IE=edge">
<meta name=viewport content="width=device-width, initial-scale=1">
<title>10 Things You Should Know About Memory Alignment | ncmiller.dev</title>
<meta name=generator content="Jekyll v4.3.2">
<meta property=og:title content="10 Things You Should Know About Memory Alignment">
<meta name=author content="Nick Miller">
<meta property=og:locale content=en_US>
<meta name=description content="Memory alignment is a topic that many developers rarely think about.">
<meta property=og:description content="Memory alignment is a topic that many developers rarely think about.">
<link rel=canonical href=https://ncmiller.dev/memory-alignment.html>
<meta property=og:url content=/memory-alignment.html>
<meta property=og:site_name content=ncmiller.dev>
<meta property=og:type content=article>
<meta property=article:published_time content=2023-03-05T00:00:00-08:00>
<meta name=twitter:card content=summary>
<meta property=twitter:title content="10 Things You Should Know About Memory Alignment">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Nick Miller"},"dateModified":"2023-03-05T00:00:00-08:00","datePublished":"2023-03-05T00:00:00-08:00","description":"Memory alignment is a topic that many developers rarely think about.","headline":"10 Things You Should Know About Memory Alignment","mainEntityOfPage":{"@type":"WebPage","@id":"/memory-alignment.html"},"url":"/memory-alignment.html"}</script>
<style>html{font-size:16px}body,h1,h2,h4,p,blockquote,pre,hr,ol,ul{margin:0;padding:0}body{font:400 16px/1.5 -apple-system,system-ui,BlinkMacSystemFont,"Segoe UI","Segoe UI Emoji","Segoe UI Symbol","Apple Color Emoji",Roboto,Helvetica,Arial,sans-serif;color:#bbbbbb;background-color:#181818;-webkit-text-size-adjust:100%;-webkit-font-feature-settings:"kern"1;-moz-font-feature-settings:"kern"1;-o-font-feature-settings:"kern"1;font-feature-settings:"kern"1;font-kerning:normal;display:flex;min-height:100vh;flex-direction:column;overflow-wrap:break-word}h1,h2,h4,p,blockquote,pre,ul,ol{margin-bottom:15px}hr{margin-top:30px;margin-bottom:30px}main{display:block}img{max-width:100%;vertical-align:middle}ul,ol{margin-left:30px}h1,h2{font-weight:400}a{color:#79b8ff;text-decoration:none}a:visited{color:#79b8ff}a:hover{color:#bbbbbb;text-decoration:underline}.social-media-list a:hover,.pagination a:hover{text-decoration:none}blockquote{color:#999999;border-left:4px solid #404040;padding-left:15px;font-size:1.125rem;font-style:italic}blockquote>:last-child{margin-bottom:0}pre,code{font-family:"Menlo","Inconsolata","Consolas","Roboto Mono","Ubuntu Mono","Liberation Mono","Courier New",monospace;font-size:0.9375em;border:1px solid #404040;border-radius:3px;background-color:#212121}code{padding:1px 5px}pre{padding:8px 12px;overflow-x:auto}pre>code{border:0;padding-right:0;padding-left:0}.wrapper{max-width:calc(800px - (30px));margin-right:auto;margin-left:auto;padding-right:15px;padding-left:15px}@media screen and (min-width:800px){.wrapper{max-width:calc(800px - (30px*2));padding-right:30px;padding-left:30px}}.wrapper:after{content:"";display:table;clear:both}.orange{color:#f66a0a}.grey{color:#828282}.svg-icon{width:1.25em;height:1.25em;display:inline-block;fill:currentColor;vertical-align:text-bottom}@media screen and (max-width:800px){}.site-header{border-top:5px solid #999999;border-bottom:1px solid #404040;min-height:55.95px;line-height:54px;position:relative}.site-title{font-size:1.625rem;font-weight:300;letter-spacing:-1px;margin-bottom:0;float:left}@media screen and (max-width:600px){.site-title{padding-right:45px}}.site-title,.site-title:visited{color:#a6a6a6}.site-nav{position:absolute;top:9px;right:15px;background-color:#181818;border:1px solid #404040;border-radius:5px;text-align:right}.site-nav input~.trigger{clear:both;display:none}.site-nav input:checked~.trigger{display:block;padding-bottom:5px}.site-nav .page-link{color:#bbbbbb;line-height:1.5;display:block;padding:5px 10px;margin-left:20px}.site-nav .page-link:not(:last-child){margin-right:0}@media screen and (min-width:600px){.site-nav{position:static;float:right;border:none;background-color:inherit}.site-nav input~.trigger{display:block}.site-nav .page-link{display:inline;padding:0;margin-left:auto}.site-nav .page-link:not(:last-child){margin-right:20px}}.site-footer{border-top:1px solid #404040;padding:30px 0}.feed-subscribe .svg-icon{padding:5px 5px 2px 0}.contact-list,.social-media-list{list-style:none;margin-left:0}.footer-col-wrapper,.social-links{font-size:0.9375rem;color:#999999}.footer-col{margin-bottom:15px}@media screen and (min-width:800px){}@media screen and (min-width:600px){.footer-col-wrapper{display:flex}.footer-col{width:calc(100% - (30px/2));padding:0 15px}.footer-col:first-child{padding-right:15px;padding-left:0}.footer-col:last-child{padding-right:0;padding-left:15px}}.page-content{padding:30px 0;flex:1 0 auto}.post-meta{font-size:14px;color:#999999}.post-header{margin-bottom:30px}.post-title{font-size:2.625rem;letter-spacing:-1px;line-height:1.15}@media screen and (min-width:800px){.post-title{font-size:2.625rem}}.post-content{margin-bottom:30px}.post-content h2{margin-top:30px}.post-content h2{font-size:1.75rem}@media screen and (min-width:800px){.post-content h2{font-size:2rem}}@media screen and (min-width:800px){}.social-media-list{display:table;margin:0 auto}.social-media-list li{float:left;margin:5px 10px 5px 0}.social-media-list li:last-of-type,.pagination li:last-of-type{margin-right:0}.social-media-list li a{display:block;padding:10px 12px;border:1px solid #404040}.social-media-list li a:hover,.pagination li a:hover{border-color:#a6a6a6}@media screen and (min-width:800px){}.site-title::before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAntJREFUWIXNl7uLE1EUxn8JNgmCpWASGyU2ZrHKq1D/gdimWbAQQx4Eg6nE0lpRlzXLLikWFsXWwBbptFiTVIOzjaKNsylEGw0k3a5FOJM7k5lkJg/0g+E+5px7vntezMA/RsC+MfzdP1unwfCFiMWmZbFu404kzIkYv3xlY63Gv3/7ZCERXPSgej8+990sGYEjAfsB9X7cfGT9NPLF0ZC8AywyvgiIohwke15gJzZP7//NAS/xWwVcc8Cry5clOjMHvMCNqJq0vgk4HWyvArdKUXH13UOLjC8C8+B0c9Vzt38+No3PCqcvAmp9u+3JePJx5Ep0IQJekxKg0dgBoFQqzpX1TMAe41n5EM2EKJWKtLT9xTqhG8QL9kOdvCNecNMRnPNDwAvBej9OLnIXgJa2T6Oxw9c7z1xDuJZWLLcXqLlgb8WOHvDTCQWZTNacB4PjyNZqNQBCoTCj0dBRz9UDfkhkMlkq1TKdoy7pbAqAyKUoAIM/A9rtNs1mE4DPxx1ghR4Q48ftbc4DjwpPAHix+5YHhfxEcHjK3ptDrl1PmyRgBTkgrj/RD7l14yLvtR/mCPBrcDoRDkctuoZhBKYI+EV+s0ilWmZ765W5p2mao2wikUDXdfaauwDcv1eYDsGiHrDngMw7R10Aer2eqXMztcGH7rgaLI1IjEupeB29IJlMOu4HYex+9eYy9zq6QW4PVg+oemYI/NxGRX5z0mTE/epaJSE4eH1gzqd+zfwil8udVaplAEsOqOuXz7fMPV3XzblhGIGFP0hUqBWgGpdR4i/GDcMIGIax3J+RoNVqBWBcUtLtVKSzKUv8xbBg6RCoiMViM3uJ3TjAX29yU11IebvzAAAAAElFTkSuQmCC);display:inline-block;position:relative;width:37px;top:5px}img.centered{display:block;margin-left:auto;margin-right:auto}</style><link type=application/atom+xml rel=alternate href=https://ncmiller.dev/feed.xml title=ncmiller.dev>
<style id=ctre_styles>code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.property{color:#f92672}.token.number{color:#ae81ff}.token.char,.token.string{color:#a6e22e}.token.operator,.token.variable{color:#f8f8f2}.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}#isso-thread *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}#isso-thread{padding:0;margin:0}#isso-thread>h4{color:#555;font-weight:bold}#isso-thread .textarea{min-height:58px;outline:0}#isso-thread .textarea.placeholder{color:#757575}.isso-postbox{max-width:68em;margin:0 auto 2em;clear:right}.isso-postbox>.form-wrapper{display:block;padding:0}.isso-postbox>.form-wrapper>.auth-section{display:block}.isso-postbox>.form-wrapper .textarea{margin:0 0 .3em;padding:.4em .8em;border-radius:3px;background-color:#fff;border:1px solid rgba(0,0,0,0.2);box-shadow:0 1px 2px rgba(0,0,0,0.1)}.isso-postbox>.form-wrapper .notification-section{font-size:0.90em;padding-top:.3em}#isso-thread .textarea:focus,#isso-thread input:focus{border-color:rgba(0,0,0,0.8)}.isso-postbox>.form-wrapper>.auth-section .input-wrapper{display:inline-block;position:relative;max-width:25%;margin:0}.isso-postbox>.form-wrapper>.auth-section .input-wrapper input{padding:.3em 10px;max-width:100%;border-radius:3px;background-color:#fff;line-height:1.4em;border:1px solid rgba(0,0,0,0.2);box-shadow:0 1px 2px rgba(0,0,0,0.1)}.isso-postbox>.form-wrapper>.auth-section .post-action{display:inline-block;float:right;margin:0 0 0 5px}.isso-postbox>.form-wrapper>.auth-section .post-action>input{padding:calc(.3em - 1px);border-radius:2px;border:1px solid #CCC;background-color:#DDD;cursor:pointer;outline:0;line-height:1.4em;box-shadow:0 1px 2px rgba(0,0,0,0.1)}.isso-postbox>.form-wrapper>.auth-section .post-action>input:hover{background-color:#CCC}.isso-postbox>.form-wrapper>.auth-section .post-action>input:active{background-color:#BBB}.isso-postbox>.form-wrapper>.notification-section{padding-bottom:10px}@media screen and (max-width:600px){.isso-postbox>.form-wrapper>.auth-section .input-wrapper{display:block;max-width:100%;margin:0 0 .3em}.isso-postbox>.form-wrapper>.auth-section .input-wrapper input{width:100%}}@media (prefers-color-scheme:dark){}</style><meta name=referrer content=no-referrer><link rel="shortcut icon" type=image/x-icon href=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAntJREFUWIXNl7uLE1EUxn8JNgmCpWASGyU2ZrHKq1D/gdimWbAQQx4Eg6nE0lpRlzXLLikWFsXWwBbptFiTVIOzjaKNsylEGw0k3a5FOJM7k5lkJg/0g+E+5px7vntezMA/RsC+MfzdP1unwfCFiMWmZbFu404kzIkYv3xlY63Gv3/7ZCERXPSgej8+990sGYEjAfsB9X7cfGT9NPLF0ZC8AywyvgiIohwke15gJzZP7//NAS/xWwVcc8Cry5clOjMHvMCNqJq0vgk4HWyvArdKUXH13UOLjC8C8+B0c9Vzt38+No3PCqcvAmp9u+3JePJx5Ep0IQJekxKg0dgBoFQqzpX1TMAe41n5EM2EKJWKtLT9xTqhG8QL9kOdvCNecNMRnPNDwAvBej9OLnIXgJa2T6Oxw9c7z1xDuJZWLLcXqLlgb8WOHvDTCQWZTNacB4PjyNZqNQBCoTCj0dBRz9UDfkhkMlkq1TKdoy7pbAqAyKUoAIM/A9rtNs1mE4DPxx1ghR4Q48ftbc4DjwpPAHix+5YHhfxEcHjK3ptDrl1PmyRgBTkgrj/RD7l14yLvtR/mCPBrcDoRDkctuoZhBKYI+EV+s0ilWmZ765W5p2mao2wikUDXdfaauwDcv1eYDsGiHrDngMw7R10Aer2eqXMztcGH7rgaLI1IjEupeB29IJlMOu4HYex+9eYy9zq6QW4PVg+oemYI/NxGRX5z0mTE/epaJSE4eH1gzqd+zfwil8udVaplAEsOqOuXz7fMPV3XzblhGIGFP0hUqBWgGpdR4i/GDcMIGIax3J+RoNVqBWBcUtLtVKSzKUv8xbBg6RCoiMViM3uJ3TjAX29yU11IebvzAAAAAElFTkSuQmCC><style>.sf-hidden{display:none!important}</style><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style></head>
<body><header class=site-header>
 <div class=wrapper><a class=site-title rel=author href=https://ncmiller.dev/>ncmiller.dev</a><nav class=site-nav>
 <input type=checkbox id=nav-trigger class="nav-trigger sf-hidden">
 <label for=nav-trigger class=sf-hidden>
 
 </label>
 <div class=trigger><a class=page-link href=https://ncmiller.dev/about/>About</a><a class=page-link href=https://ncmiller.dev/projects/>Projects</a></div>
 </nav></div>
</header>
<main class=page-content aria-label=Content>
 <div class=wrapper>
 <article class="post h-entry" itemscope itemtype=http://schema.org/BlogPosting>
 <header class=post-header>
 <h1 class="post-title p-name" itemprop="name headline">10 Things You Should Know About Memory Alignment</h1>
 <p class=post-meta><time class=dt-published datetime=2023-03-05T00:00:00-08:00 itemprop=datePublished>
 Mar 5, 2023
 </time></p>
 </header>
 <div class="post-content e-content" itemprop=articleBody>
 <p>Memory alignment is a topic that many developers rarely think about.</p>
<p>In high-level languages like Python and Javascript, memory alignment is
hidden from the developer. However, if you’re programming in a low-level language
like C or C++, you have more control over alignment. This can be helpful in domains
like embedded software and game programming, where efficient use of memory and CPU
is a top priority.</p>
<p>Here are 10 things you should know about memory alignment.</p>
<ul id=markdown-toc>
 <li><a href=#0-what-even-is-unaligned-memory-access id=markdown-toc-0-what-even-is-unaligned-memory-access>0: What even is unaligned memory access?</a></li>
 <li><a href=#1-unaligned-memory-access-is-bad id=markdown-toc-1-unaligned-memory-access-is-bad>1: Unaligned memory access is bad</a></li>
 <li><a href=#2-the-compiler-will-pad-your-structs-for-alignment-reasons id=markdown-toc-2-the-compiler-will-pad-your-structs-for-alignment-reasons>2: The compiler will pad your structs for alignment reasons</a></li>
 <li><a href=#3-you-can-rearrange-struct-fields-to-reduce-padding-the-compiler-wont-do-this-for-you id=markdown-toc-3-you-can-rearrange-struct-fields-to-reduce-padding-the-compiler-wont-do-this-for-you>3: You can rearrange struct fields to reduce padding. The compiler won’t do this for you.</a></li>
 <li><a href=#4-your-compiler-can-detect-unaligned-access id=markdown-toc-4-your-compiler-can-detect-unaligned-access>4: Your compiler can detect unaligned access</a></li>
 <li><a href=#5-you-can-tell-the-compiler-to-remove-padding-from-structs id=markdown-toc-5-you-can-tell-the-compiler-to-remove-padding-from-structs>5: You can tell the compiler to remove padding from structs</a></li>
 <li><a href=#6-you-might-need-to-manually-align-data-in-certain-scenarios id=markdown-toc-6-you-might-need-to-manually-align-data-in-certain-scenarios>6: You might need to manually align data in certain scenarios</a></li>
 <li><a href=#7-you-can-customize-the-alignment-of-data-at-compile-time id=markdown-toc-7-you-can-customize-the-alignment-of-data-at-compile-time>7: You can customize the alignment of data at compile time</a></li>
 <li><a href=#8-you-cant-use-malloc-for-custom-alignments id=markdown-toc-8-you-cant-use-malloc-for-custom-alignments>8: You can’t use <code>malloc()</code> for custom alignments</a></li>
 <li><a href=#9-fast-power-of-2-alignment id=markdown-toc-9-fast-power-of-2-alignment>9: Fast power-of-2 alignment</a></li>
</ul>
<h2 id=0-what-even-is-unaligned-memory-access>0: What even is unaligned memory access?</h2>
<p>Unaligned memory access occurs when you try to access N bytes of data starting
from an address that is not evenly divisible by N. For example, attempting
to read a <code>uint32_t</code> from address <code>0xc021</code> is an unaligned read, because <code>0xc021</code>
is not a multiple of 4 (the bottom two bits would have to be 0 for it to be
a multiple of 4).</p>
<p>The alignment requirement of a type will typically be the size of the type.</p>
<p>C11 introduced <code>_Alignof</code>, which you can use to query the alignment of any
type in code:</p>
<pre class="line-numbers language-c" tabindex=0><code class=language-c><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdint.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">EVAL_PRINT</span><span class="token expression"><span class="token punctuation">(</span>expr<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span></span><span class="token string">"%-20s = %u\n"</span><span class="token expression"><span class="token punctuation">,</span> #expr<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">uint8_t</span><span class="token punctuation">)</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>

<span class="token keyword">struct</span> <span class="token class-name">foo</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> a<span class="token punctuation">;</span>
    <span class="token keyword">char</span> b<span class="token punctuation">;</span>
    <span class="token keyword">float</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token class-name">uint8_t</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token class-name">uint16_t</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token class-name">uint32_t</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">foo</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token class-name">uint64_t</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token class-name">size_t</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>When compiling for my x86_64 machine, I get:</p>
<pre><code>$ gcc alignof.c &amp;&amp; ./a.out
_Alignof(char)       = 1
_Alignof(uint8_t)    = 1
_Alignof(uint16_t)   = 2
_Alignof(uint32_t)   = 4
_Alignof(int)        = 4
_Alignof(struct foo) = 4
_Alignof(uint64_t)   = 8
_Alignof(void*)      = 8
_Alignof(size_t)     = 8
</code></pre>
<p>Notice that the alignment of <code>struct foo</code> is set to the alignment of the
largest field.</p>
<p>If I compile in 32-bit mode, I get:</p>
<pre><code>$ gcc -m32 alignof.c &amp;&amp; ./a.out
_Alignof(char)       = 1
_Alignof(uint8_t)    = 1
_Alignof(uint16_t)   = 2
_Alignof(uint32_t)   = 4
_Alignof(int)        = 4
_Alignof(struct foo) = 4
_Alignof(uint64_t)   = 4
_Alignof(void*)      = 4
_Alignof(size_t)     = 4
</code></pre>
<p>The only difference is that the alignment of 8-byte types like <code>uint64_t</code>
is 4 now instead of 8, since the word size is 32-bits.</p>
<p>Note that having an array does not change the alignment. For
instance: <code>uint8_t x[16];</code> has an alignment of 1, not 16.</p>
<p>Unaligned memory access can occur when casting variables to types of different
lengths, or when doing pointer arithmetic followed by access to at least
2 bytes of data. This kind of thing is not uncommon to encounter in
embedded software or other kinds of low-level software that interface
directly or indirectly with hardware.</p>
<h2 id=1-unaligned-memory-access-is-bad>1: Unaligned memory access is bad</h2>
<p>The way an unaligned memory access is handled will depend on your processor
architecture (e.g. x86, ARM). Some processors will be able to perform the access
transparently in hardware (perhaps with a performance cost), and others will raise
an exception which must be handled in software. Sometimes the aligned
access will require two memory reads instead of one.</p>
<p>Depending on your processor, an unaligned access might be a minor
performance hit, it might crash everything, or even worse, it might silently
perform a different memory access than the one you requested.</p>
<h2 id=2-the-compiler-will-pad-your-structs-for-alignment-reasons>2: The compiler will pad your structs for alignment reasons</h2>
<p><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDQ1My4wMDk2NjM0OTY1OTY2IDIwOC42OTA1NDQwMDc3ODMiIHdpZHRoPSI0NTMuMDA5NjYzNDk2NTk2NiIgaGVpZ2h0PSIyMDguNjkwNTQ0MDA3NzgzIj4KICA8IS0tIHN2Zy1zb3VyY2U6ZXhjYWxpZHJhdyAtLT4KICAKICA8ZGVmcz4KICAgIDxzdHlsZSBjbGFzcz0ic3R5bGUtZm9udHMiPgogICAgICBAZm9udC1mYWNlIHsKICAgICAgICBmb250LWZhbWlseTogIlZpcmdpbCI7CiAgICAgICAgc3JjOiB1cmwoImh0dHBzOi8vZXhjYWxpZHJhdy5jb20vVmlyZ2lsLndvZmYyIik7CiAgICAgIH0KICAgICAgQGZvbnQtZmFjZSB7CiAgICAgICAgZm9udC1mYW1pbHk6ICJDYXNjYWRpYSI7CiAgICAgICAgc3JjOiB1cmwoImh0dHBzOi8vZXhjYWxpZHJhdy5jb20vQ2FzY2FkaWEud29mZjIiKTsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjQ1My4wMDk2NjM0OTY1OTY2IiBoZWlnaHQ9IjIwOC42OTA1NDQwMDc3ODMiIGZpbGw9IiNmZmZmZmYiPjwvcmVjdD48ZyBzdHJva2UtbGluZWNhcD0icm91bmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwMi42MjM2Mjg3MjY5NjU3IDEwKSByb3RhdGUoMCAyOS41IDMwLjUpIj48cGF0aCBkPSJNLTEuMSAwLjM5IEw1OS4zNyAwLjE0IEw2MC41MyA2Mi4wNCBMMC4zOCA1OS4xMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiIGZpbGw9IiM4MmM5MWUiPjwvcGF0aD48cGF0aCBkPSJNLTAuMDMgLTAuNDkgQzE0LjggMC43NSwgMzAuODMgLTAuNzEsIDU5LjM2IDAuMDkgTTAuNDYgMC41NSBDMjIuNzUgLTEuMjksIDQ1LjI5IDAuMzksIDU4LjE3IC0wLjUyIE01Ny4zOSAxLjQ0IEM1Ny42NSAxMi4wNywgNTkuMjEgMjUuNDQsIDYwLjQ2IDYwLjM2IE01OS44OSAtMC4zNyBDNTkuNDMgMTcuNzIsIDU4LjY3IDM0LjUyLCA1OS4xNSA2MC40IE02MC4yOSA2MS4wOCBDMzcgNjAuNzMsIDE0LjM5IDYxLjM3LCAtMC42NiA2MC4yNiBNNTguMjYgNjEuNjIgQzM3LjE2IDYwLjUsIDE0LjU0IDYwLjAzLCAtMC4xNyA2MC41OCBNMS44NSA1OS44OSBDLTAuMTIgNDUuMywgLTAuMDQgMzQuNiwgMS44MSAxLjQ5IE0tMC41NCA2MC40NiBDLTAuMTYgNDEuNzYsIC0wLjE3IDIyLjY1LCAwLjE3IC0wLjI4IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjUuNDUzNjMwNTU4MDIwNCAyOC41KSByb3RhdGUoMCA2LjY2OTk5ODE2ODk0NTMxMjUgMTIpIj48dGV4dCB4PSI2LjY2OTk5ODE2ODk0NTMxMjUiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5hPC90ZXh0PjwvZz48ZyBzdHJva2UtbGluZWNhcD0icm91bmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2Mi40NzQ5NjgyMDE5NTQxNCAxMC44NTEzMzk0NzQ5ODgzNzkpIHJvdGF0ZSgwIDI5LjUgMzAuNSkiPjxwYXRoIGQ9Ik0wIDAgQzAgMCwgMCAwLCAwIDAgTTAgMCBDMCAwLCAwIDAsIDAgMCBNLTAuMiA2LjE0IEMxLjA0IDMuOTQsIDQuMzYgMS42MywgNS40NSAtMC4yNiBNLTAuMjcgNi43NyBDMS4wNSA0Ljc4LCAyLjkyIDIuNjcsIDQuNzkgMC43MSBNMS40NCAxMS40MiBDMi45MiAxMS4wNSwgNS4xNyA3LjU2LCA5LjgxIC0wLjYyIE0wLjE0IDEyLjE3IEMzLjU1IDcuOCwgNS43NiA0LjY5LCAxMS4yOCAwLjU0IE0tMS45OCAxOS45NCBDNi4zMyAxMi43NywgMTAuMTEgNC4yNCwgMTUuNTMgMC42NCBNMC4wOSAxOC41OCBDNC4xMSAxNC4wOCwgNy42NyA4Ljk5LCAxNS4xNCAwLjQ1IE0tMS41OSAyNS44NiBDNi4zMSAxNiwgMTAuNjYgOC45NiwgMjEuMzUgLTAuNzQgTTEuMTQgMjQuNTggQzcuMjkgMTcuMTcsIDE0LjUgOC45OSwgMjIuMjEgMC45MyBNLTAuNDggMjguNzkgQzcuMjIgMTguNzgsIDE2LjYyIDkuNTUsIDI1LjI5IDIuMDggTTAuNzggMzEuMDEgQzguNiAyMC40MywgMTcuMjQgMTEuMzksIDI2LjcxIDAuMTcgTS0yLjIxIDM1LjQzIEM3LjY4IDI3LjQ1LCAxNy40NSAxOS43NSwgMzAuMDIgMS4zIE0tMC43NCAzNi4yOSBDMTAuMTkgMjUuNTcsIDE4Ljg3IDE1LjEyLCAzMi42NiAtMC45MSBNMi4wMiA0Mi4yMiBDMTQuMTQgMjcuNTcsIDI2LjA5IDExLjQxLCAzNy44NiAtMS4wMiBNMC45NSA0MS45NiBDMTMuMDYgMjYuMzgsIDI3LjYzIDExLjk1LCAzNy4xMSAtMC4zNCBNLTAuMjEgNDguMjEgQzE4LjM2IDMwLjU5LCAzNS4zIDExLjU3LCA0Mi40NyAxLjU0IE0wLjY0IDQ5LjE0IEMxMi4zNSAzNC4xNCwgMjUuNzMgMjAuMTYsIDQyLjYgMC4xNSBNMC41MSA1NC4zIEMxNy4zNSAzNS41MywgMzYuMDUgMTMuNDgsIDQ4LjAxIDAuMzggTS0wLjYzIDU0LjQ4IEMxNi41IDM2LjI2LCAzMi43NCAxNy40NiwgNDguMyAtMC42NiBNLTEuMzcgNTkuODcgQzE2LjQ5IDQxLjksIDM1LjMxIDIwLjQzLCA1Mi44OCAtMS42NCBNLTAuNDcgNjAuMzkgQzE3Ljk3IDM5LjM2LCAzNi43MyAxNy42MiwgNTIuNDIgLTAuMjYgTTMuOTMgNjIuMjYgQzIwLjUxIDQ1Ljk1LCAzNS4xNyAyNS4wNiwgNTYuODUgLTEuNTQgTTMuOTggNjMuMjUgQzIxLjUgNDAuNjksIDQyLjE5IDE3LjgsIDU3LjM1IC0wLjE4IE03LjQ1IDYzLjQyIEMyMi43MyA0NS4wNiwgNDIuODkgMjYuMjUsIDYyLjgzIDAuNTMgTTcuODIgNjMuNjUgQzE5LjM3IDUwLjAzLCAzMC44IDM2Ljg2LCA2Mi4xMiAxLjQ2IE0xMy4xOSA2NC40NCBDMzIuMiA0Mi4yMSwgNDguMDEgMjIuNSwgNjIuNjMgNi44OCBNMTIuOTQgNjMuNjEgQzI1LjEyIDUxLjcyLCAzNS4xIDQwLjAxLCA2Mi4xNiA5LjE5IE0xOC41NiA2NC4xMSBDMzUuMzUgNDMuNDIsIDUxLjgyIDIyLjkyLCA2MC42MyAxMi4yNyBNMTguMzEgNjQuNzkgQzI5LjkgNTAuMzcsIDQxLjE1IDM2LjA0LCA2MS42OSAxNC44MyBNMjMuNDIgNjQuNDUgQzMyLjM4IDUwLjM3LCA0Mi4yOCA0MC4yMywgNjEuMDggMjEuNiBNMjMuODYgNjIuNjggQzM1LjYyIDUwLjU3LCA0Ni4wMyAzOC42LCA2MC45IDIwLjg1IE0yOS4yOCA2My4zMyBDMzguMjggNTMuNTIsIDQ2Ljk2IDQxLjc1LCA2Mi40IDI1LjM2IE0yOS41NCA2NC44NSBDMzcuMzIgNTUuODMsIDQ0LjA3IDQ2Ljg1LCA2MS4xMiAyNi40NiBNMzQuOTggNjQuOTkgQzQzLjMxIDU1LjU2LCA1MC4yIDQ1LjE4LCA2My42NCAzMi41IE0zNS44MSA2NC4xNiBDNDQuMSA1Mi41MiwgNTQuMTYgNDEuMDksIDYxLjEzIDMyLjE2IE0zOS44OSA2NC42MiBDNDMuODYgNTcuNCwgNDguODkgNTIuOTIsIDYxIDM3LjI2IE00MC43MiA2My4wMSBDNDUuNDUgNTguOTQsIDQ5Ljk1IDUzLjE5LCA2Mi40MyAzOS4xOCBNNDMuNTcgNjIuOTIgQzUwLjE1IDU2LjA4LCA1My44MSA1MC40NCwgNjAuMTQgNDUuMTYgTTQ2LjQyIDYyLjQ3IEM0OC4xIDYwLjMxLCA1Mi4yNiA1Ni40NywgNjEuNTUgNDUuMTcgTTQ5LjIyIDYyLjg0IEM1Mi41MyA2MC4xNywgNTcuODkgNTUuNzksIDYwLjg1IDUxLjc0IE01MC4yMiA2NC40OSBDNTQuMDMgNjAuMjgsIDU2LjMgNTYuOTMsIDYxLjMyIDUxLjYxIE01NS4zOSA2My4zNSBDNTcuNDIgNjEuMzUsIDU5LjMyIDYwLjE0LCA2MS45NSA1Ni44NCBNNTYuNDcgNjMuNTEgQzU3LjU2IDYxLjU1LCA1OS42NyA1OS42OCwgNjEuMjMgNTcuMTYiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjUiIGZpbGw9Im5vbmUiPjwvcGF0aD48cGF0aCBkPSJNLTEuODggLTEuMjYgQzIxLjczIC0xLjEyLCA0NS4xMiAtMS4zOSwgNTkuNzggLTAuNTUgTS0wLjE1IC0wLjA1IEMyMC40OSAtMC4zMiwgNDAuMTEgMCwgNTguOTcgMC43OSBNNTcuNTEgMC4wOSBDNTcuNjcgMTguMTgsIDYxIDQxLjA3LCA1OS43NCA2MC43MyBNNTguNjkgMC45IEM1Ny44NSAxNi4zOSwgNTguMDIgMzIuMTYsIDU4LjA0IDYxLjY3IE01Ny4zMiA2MC41NyBDNDUuMTEgNjIuMzMsIDI5LjAzIDYyLjk5LCAwLjggNjAuMTUgTTU5LjY0IDYwLjc4IEMzOC40NSA2MS4zOCwgMTcuODYgNjEuMDgsIC0wLjgxIDYwLjQxIE0tMC43NCA2MS4wOCBDMC4wNiAzNy45MywgMC41OSAxMy45NywgLTEuMzMgLTAuNTcgTS0wLjUyIDYxLjE4IEMwLjczIDQxLjQ2LCAwLjE0IDIzLjQ1LCAtMC40MSAtMC45OCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPjwvcGF0aD48L2c+PGcgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDUuMTI5OTk2NTMyODM0OCAxMzMuOTgxMDU3ODI2NTA2ODYpIHJvdGF0ZSgwIDI5LjUgMzAuNSkiPjxwYXRoIGQ9Ik0wLjc2IDAuMDIgTDYwLjY0IC0wLjc3IEw1OS45IDYyLjggTDEuMDcgNjEuNDciIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjZWVlZTAwIj48L3BhdGg+PHBhdGggZD0iTS0wLjQzIDEuOTggQzE5LjU4IDIuMjYsIDM4LjU4IDEuMywgNTguMTUgMS4wOSBNLTAuMjIgMC4zNyBDMTMuMyAwLjMyLCAyNS44OCAtMS4xOSwgNTguNDEgMC45OCBNNTkuMDggMC4xMyBDNjAuMyAxOS42MiwgNjAuNiAzNi41OSwgNTguNDMgNjEuMzEgTTU5LjE4IDAuMzMgQzU4LjE4IDE0LjAyLCA1OS40IDI4LjE0LCA1OC4wMiA2MC4xMyBNNTkuMzEgNjAuMTggQzQzLjY3IDYxLjE0LCAzMi40MSA2Mi4zNiwgMS4xOCA2MS45MiBNNTguMjUgNjEuMiBDNDAuNTggNjAuNzUsIDIxLjEzIDYwLjYxLCAtMC45MyA2MS43IE0tMC42NiA1OS40OSBDLTAuNzkgNDEuMTcsIC0wLjk4IDE4LjYzLCAtMS41NiAwLjAxIE0wLjkzIDYwLjI2IEMwLjA1IDQ1Ljk0LCAtMC43IDMwLjM4LCAwLjg3IC0wLjk5IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjguOTQwMDAxNzIwODIzMSAxNTIuNDgxMDU3ODI2NTA2ODYpIHJvdGF0ZSgwIDUuNjg5OTk0ODEyMDExNzE5IDEyKSI+PHRleHQgeD0iNS42ODk5OTQ4MTIwMTE3MTkiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5kPC90ZXh0PjwvZz48ZyBzdHJva2UtbGluZWNhcD0icm91bmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2NC4wNjk2MTAzMDIwMDA0IDEzNS4yMTc1NTMyMjAyNjU2KSByb3RhdGUoMCAyOS41IDMwLjUpIj48cGF0aCBkPSJNMCAwIEMwIDAsIDAgMCwgMCAwIE0wIDAgQzAgMCwgMCAwLCAwIDAgTS0wLjg0IDYuNDMgQzEuMTYgNC42NywgMi41MyAzLjE2LCA1LjY5IDAuNzYgTS0wLjEyIDYuNzggQzEuNzcgNC41OCwgMi44OSAyLjI0LCA0Ljg5IDAuMDIgTS0wLjI5IDExLjI4IEMzLjg0IDkuOTgsIDMuMjggOC4wNSwgMTEuODcgMC44MSBNMC42MiAxMi40MSBDMy4wNiA4LjI0LCA2LjQgNC4zNSwgOS44NSAtMC42MSBNMS40MSAxNi41NyBDNS44NiAxMy4yLCAxMC4wNiA3LjY2LCAxNC42NSAtMC44NSBNMC43MSAxOS4yMSBDNS4wNiAxMi4zNiwgMTEuMjMgNC4wNiwgMTYuNTYgMC4xOCBNMC43MiAyNS4wNyBDNS4xMSAxOC40MywgMTMuNjggMTEuNTYsIDIyLjg5IC0xLjE5IE0wLjc1IDI0LjMxIEM1LjYxIDE4LjEyLCAxMS4yOSAxMC45OCwgMjEuMjIgLTAuNDIgTTEuNjQgMzAuNDMgQzExLjAzIDE5LjMyLCAxOC45NiA4LjM5LCAyNy43NiAwLjc0IE0wLjYzIDMwLjU2IEM3LjQ0IDIzLjAzLCAxNC42NyAxNC4xOSwgMjYuMzcgMC4xNiBNMC40NyAzNy4zOCBDNy44NCAyOC4xMiwgMTUuMTIgMTYuNSwgMzAuMDkgLTAuMjcgTS0xLjA1IDM3LjY3IEM4Ljg2IDI1LjU1LCAxOS45OCAxMy45OCwgMzEuMiAtMC42NSBNLTEuNjQgNDIuMjUgQzkuMzYgMzAuNzQsIDIzLjIgMTguNTgsIDM1LjkyIC0wLjg4IE0tMC42MyA0MS43OSBDMTEuNDcgMjkuMywgMjMuMDggMTYuNzcsIDM3LjMzIC0wLjQxIE0tMC4xNCA0Ny42MyBDMTIuNjIgMzMuMjIsIDMwLjkyIDE0LjUyLCA0NC40MiAtMC44MSBNLTAuMTIgNDguMTMgQzguMzQgMzguODksIDE2LjkyIDI4LjgzLCA0Mi4yNCAtMC40IE0wLjA5IDU1LjU3IEM4LjM2IDQxLjI3LCAxOC4xNyAzMy43NSwgNDcuMTEgLTAuMzYgTS0wLjM5IDU0Ljg3IEMxMi41IDQwLjk0LCAyNi4xMSAyNS4zMSwgNDcuMjcgMC42NyBNMC4wOSA2Mi4wNCBDMTYuODMgMzguOTUsIDM0LjU1IDE3LjcsIDUxLjcxIC0wLjA0IE0wLjc4IDYxLjU3IEMxNy40NSA0Mi44OSwgMzMuMjUgMjMuNTYsIDUzLjExIC0wLjA3IE0xLjE3IDYyLjI3IEMxNy4yNiA0NS4wMywgMzYuMzMgMjkuMDQsIDU3LjQ3IDEuOTYgTTIuODIgNjMuMzMgQzE4LjU5IDQ2LjI1LCAzMy4wNSAyOS4zNSwgNTcuNyAwLjY1IE03LjA1IDYzLjM0IEMyMS42NiA1MC4xNiwgMzIuMTUgMzYuNiwgNjAuOTYgMC4zOCBNNy4wOCA2My4xNiBDMjkuNTEgMzkuNjIsIDQ5LjIzIDE2LjM3LCA2MS44MiAxLjc5IE0xMS42NiA2NC41MiBDMjYuOCA0NS41LCA0Mi4wNSAzMC4yNywgNjIuMDcgMTAuNDEgTTE0LjI5IDYzLjI1IEMyOC4yNyA0Ni4yMSwgNDQuMjUgMjcuNzEsIDYxLjU4IDkuMjEgTTE5LjY4IDY1LjczIEMzMS4wNyA1MC4zNywgNDIuMjIgMzUuNDQsIDYzLjcyIDE1LjQ3IE0xNy43NyA2My4yMiBDMjkuNjMgNDkuODEsIDQxLjc3IDM4LjcsIDYxLjk0IDE0LjQ5IE0yMy43MiA2Mi45NiBDMzMuNDUgNDkuNjYsIDQzLjk2IDM3LjMzLCA2My4zMSAxOC44MyBNMjQuMzMgNjQuMzkgQzM3LjgxIDQ4LjA1LCA1MS42OSAzMy4wOCwgNjAuNjkgMjAuMjMgTTI3LjY2IDYyLjcyIEMzOC43NSA1MS42MiwgNDcuODMgNDQuMzksIDYzLjE2IDI0Ljk0IE0zMC4xNSA2NC4xMyBDMzUuNzMgNTUuODcsIDQxLjgyIDQ4LjMxLCA2MC42NSAyNi4zMyBNMzQuNDggNjIuNDkgQzQxLjU4IDU1LjcxLCA0Ni45NSA0OS4zMywgNjEuMDggMzQuMTYgTTM0LjMyIDYzLjA0IEM0Ni4yMSA1MS43MSwgNTYuMTYgMzguNSwgNjAuODMgMzIuNDYgTTQxLjUgNjUuMTQgQzQzLjg1IDU4LjU5LCA1Mi4wMiA1My40MiwgNjMuMDIgMzkuNDMgTTQwLjc4IDYzLjM0IEM0My45NSA1Ny41OCwgNDguNDMgNTMuNjQsIDYwLjc1IDM5LjcxIE00NC4yNiA2My4zOCBDNTAuNzkgNTguNDcsIDU3LjU3IDUxLjA4LCA1OS40OSA0Ni4yIE00NS44IDY0LjA2IEM1MS4wMiA1Ni4yMSwgNTcuNSA0OS45MSwgNjEuNTQgNDYuMjQgTTUxLjYzIDYyLjQyIEM1NC4zMyA2MS42MSwgNTUuNjYgNTcuNzksIDYyLjE2IDQ5LjQzIE01MC4wMiA2My40NCBDNTIuNDggNjAuNTMsIDU1Ljg4IDU3LjQ2LCA2Mi4xNCA1MC45IE01NS41MiA2My4zMyBDNTcuODkgNjEuOTgsIDYwLjEgNTguOTYsIDYxLjk3IDU3Ljk2IE01NS45IDYzLjYgQzU3LjczIDYxLjM0LCA1OS45MyA1OS44MSwgNjEuMjUgNTcuNTEiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjUiIGZpbGw9Im5vbmUiPjwvcGF0aD48cGF0aCBkPSJNMS41MSAtMS4zMyBDMTcuNTEgMC4xMSwgMzQuODUgLTEuODgsIDU3Ljk3IDAuMzcgTTAuOTIgLTAuNDEgQzE4LjY4IC0wLjcxLCAzOC41NyAtMC41MywgNTkuMTYgMC4xNSBNNTkuMjEgMS4yNiBDNTkuNTkgMTYuNzEsIDU4LjY3IDMyLjc0LCA1Ny4zMSA1OS41IE01OC4wOCAwLjEgQzU4LjEgMjAuMjIsIDU5LjYgMzkuNSwgNTkuMDggNjAuNjcgTTU4LjMxIDYyLjE1IEM0NC4yIDYxLjU4LCAzMS40NSA2My40MywgLTAuMDIgNjIuODUgTTU4Ljg2IDYwLjUxIEM0Ni41MyA2MC4wMSwgMzIuNyA2MS4wMSwgMC44MiA2MC42MSBNMC40NyA1OS45NyBDLTEuMjcgMzkuOTgsIC0wLjMyIDE3LjUxLCAwLjAyIDAuMzMgTS0wLjE5IDYxLjgxIEMxLjIzIDQxLjA5LCAxLjI0IDE5LjUxLCAtMC45MyAwLjc1IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyBzdHJva2UtbGluZWNhcD0icm91bmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM4Mi4zNjEwMDI5NzE1ODQ5IDExLjU2ODAxMzg0NDM5MzM2Mykgcm90YXRlKDAgMjkuNSAzMC41KSI+PHBhdGggZD0iTTEuMzIgMS43NiBMNjAgMC40MiBMNjAuNzUgNjIuNTUgTDAuNjkgNjIuOTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjZmE1MjUyIj48L3BhdGg+PHBhdGggZD0iTTAuNCAwLjExIEMyMS42NSAtMS40LCA0Mi41IC0xLjQyLCA2MC40IDEuMTMgTS0wLjc2IC0wLjI1IEMyMS40MyAtMC4xNSwgNDEuNTEgLTAuNTksIDU5IC0wLjUzIE01Ny41MiAxLjI0IEM1OC45OSAyMy43MSwgNTguMDEgNDkuNjksIDU3LjAyIDYxLjc2IE01OS40NSAwLjkgQzYwLjA0IDE4LjU4LCA1OC45OCAzNi4zNCwgNTkuMDEgNjEuMTIgTTU5LjY4IDU5LjMyIEM0My42NyA2MC43MywgMzMuNCA2Mi41NCwgMC45MiA2Mi40NSBNNTkuNTcgNjEuMjQgQzQ1LjQzIDYwLjU1LCAzMi4zNCA2MS42LCAtMC4zNiA2MC45NyBNMC4xNSA2MS42NSBDLTEuMTggNDYuNDYsIC0xLjA5IDMyLjA3LCAtMC40IDAuOTcgTTAuMTQgNjAuNDEgQy0wLjA2IDM3LjU3LCAwLjYxIDE1LjI1LCAwLjE3IC0wLjY4IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MDYuNzgxMDA4NzY5OTI0NzcgMzAuMDY4MDEzODQ0MzkzMzYzKSByb3RhdGUoMCA1LjA3OTk5NDIwMTY2MDE1NiAxMikiPjx0ZXh0IHg9IjUuMDc5OTk0MjAxNjYwMTU2IiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBzdHlsZT0id2hpdGUtc3BhY2U6IHByZTsiIGRpcmVjdGlvbj0ibHRyIiBkb21pbmFudC1iYXNlbGluZT0idGV4dC1iZWZvcmUtZWRnZSI+YjwvdGV4dD48L2c+PGcgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMjMuNDIxMzg5MjAyNDE5MzMgMTEuNTY4MDEzODQ0MzkzMzYzKSByb3RhdGUoMCAyOS41IDMwLjUpIj48cGF0aCBkPSJNMS41NCAtMS44NyBMNjAuNCAwLjEyIEw2MC4wMyA2MC44MyBMLTAuOTcgNTkuODIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjZmE1MjUyIj48L3BhdGg+PHBhdGggZD0iTTAuMDMgMC4yMyBDMTcuNjkgMC4yNCwgMzguNDggMC44OSwgNTcuMzIgLTEuNzIgTTAuNDYgMC43MyBDMTUuODYgLTEuMzUsIDMzLjk2IDAuMTUsIDU5LjI0IC0wLjI2IE01OC4yOCAtMC4wNyBDNTcuNzUgMTMuMzEsIDU5LjI2IDI1Ljg5LCA1OS42NSA1OS45NSBNNTguOCAwLjQ4IEM1OS40MyAxNy41MiwgNTkuNiAzNy4wMywgNTguNDEgNjAuMzggTTU5LjM0IDU5LjY0IEM0Ni44OCA2Mi41NiwgMzMuMTIgNjEuMjIsIDEuNzUgNjIuNTUgTTU5LjQgNjAuNiBDMzguNjcgNjEuMzQsIDE4LjcxIDYwLjY2LCAtMC43OSA2MC4zMSBNMC40NyA1OS4zNiBDMS40OCA0NS44NiwgMS4zNSAyNy4zNSwgLTAuMjQgMCBNLTAuNDMgNjEuMzEgQy0xLjI3IDM4LjA0LCAtMS4wMSAxNi45NCwgLTAuMTMgMC42NiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPjwvcGF0aD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ3Ljg0MTM5NTAwMDc1OTIgMzAuMDY4MDEzODQ0MzkzMzYzKSByb3RhdGUoMCA1LjA3OTk5NDIwMTY2MDE1NiAxMikiPjx0ZXh0IHg9IjUuMDc5OTk0MjAxNjYwMTU2IiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBzdHlsZT0id2hpdGUtc3BhY2U6IHByZTsiIGRpcmVjdGlvbj0ibHRyIiBkb21pbmFudC1iYXNlbGluZT0idGV4dC1iZWZvcmUtZWRnZSI+YjwvdGV4dD48L2c+PGcgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMjEuNzcyNzI4Njc3NDA3NjYgMTM2LjQ1NDA0ODYxNDAyNDI2KSByb3RhdGUoMCAyOS41IDMwLjUpIj48cGF0aCBkPSJNMCAwIEMwIDAsIDAgMCwgMCAwIE0wIDAgQzAgMCwgMCAwLCAwIDAgTS0wLjQ5IDYuMzMgQzEuNTQgNS4wNywgMi45MiAyLjk4LCA1LjY2IDAuNjYgTS0wLjQzIDYuNzggQzEuMzYgNC42MiwgMy4xOSAyLjU3LCA1LjEzIDAuMTkgTTAuMjUgMTEuNTUgQzMuMzMgNy45NiwgNi40MSA1LCAxMC45IDAuNTUgTTAuMDcgMTIuMTYgQzQuMDUgNy44MSwgNi4zMyA0LjM2LCAxMSAwLjYyIE0wLjA1IDE4LjExIEM2LjUzIDEwLjU0LCA5LjczIDUuNDQsIDE1LjY0IDAuNjcgTTAuMzcgMTkuMzIgQzQuODggMTIuMTIsIDEwLjI5IDQuODYsIDE2LjIzIDEuMTYgTS0xLjYgMjQgQzUuNjMgMTcuMjksIDEwLjQgOS42OSwgMjEuMzEgLTEuMjcgTS0wLjcgMjQuMDMgQzcuODQgMTYuNTQsIDEzLjkgOC4zNSwgMjAuMzYgLTAuNzIgTS0wLjY3IDI5LjU0IEM5LjgxIDE3LjU5LCAyMC45MyA2LjA3LCAyNy43NSAxLjE4IE0wLjQyIDMwLjA0IEM2LjE3IDIyLjYyLCAxNC4xNCAxNC4wMiwgMjUuNDkgLTAuNyBNMC4wNSAzNy4wNiBDNS4zMyAzMC44MSwgMTQuNDIgMjMuMTYsIDMzLjY3IC0wLjU4IE0tMC4zOCAzNi41IEMxMS43OSAyMS43MSwgMjMuOCA3LjUyLCAzMS42MyAwLjYgTS0wLjM3IDQzLjQ3IEMxMi42OCAyNS41MiwgMjguMDQgMTEuMTUsIDM2LjA2IDAuMzggTS0wLjY0IDQxLjU0IEMxMS4wMiAyOC43OCwgMjIuNzcgMTYuNzMsIDM2LjY3IDAuMDkgTTEuNTEgNDYuOTYgQzEzLjkgMzMuMzIsIDIzIDIxLjgyLCA0MS45NiAtMS4wNiBNLTAuMDggNDguNzggQzEzLjExIDMyLjgzLCAyNi44IDE3Ljg2LCA0MS45IC0wLjU4IE0wLjc0IDU2LjE3IEMxMy43MiAzOC4xNywgMjkuNCAxOC44OCwgNDcuOCAwLjM3IE0wLjI0IDU1LjQgQzExLjA1IDQxLjM2LCAyNC4zOSAyNy40NywgNDcuOTcgLTAuNjUgTS0wLjc4IDYwLjY2IEMxOC4yMyAzOC4wOSwgMzQuMTcgMTguMzMsIDUxLjIzIDAuNzggTS0wLjE2IDYwLjM3IEMyMC45MyAzNi41NywgNDEuMjggMTIuMTMsIDUyLjM0IC0xLjA0IE00LjIxIDY0LjI3IEMxNC44MiA1MC43OSwgMjcuNDUgMzcuODYsIDU4LjM3IDEuNTYgTTIuOTMgNjIuNzcgQzIyLjc4IDQwLjEsIDQyLjc1IDE4LCA1Ny4yNyAtMC4wMiBNNi4zMyA2NS42NyBDMjguMzIgNDIuMTYsIDQ5LjggMTYuMDQsIDYxLjc0IDAuMDYgTTcuMTcgNjQuMDcgQzI2Ljk5IDQzLjE3LCA0NC4yNyAyMi45OCwgNjEuMzEgMi4zIE0xNS40IDYyLjcxIEMyNy4wNSA0Ny40LCAzOC4zIDM1LjU1LCA2Mi4xMSA5LjAzIE0xMy4wOCA2My4zOCBDMjMuNiA1My4xNiwgMzQuMzYgNDAuNDgsIDYxLjkgOS4yNSBNMTcgNjQuOTEgQzM0Ljc2IDQ2Ljc1LCA0OS45OSAyNS4wOSwgNjAuMyAxMi41MiBNMTkuMjggNjMuODEgQzM1LjEgNDQuNjcsIDUwLjc2IDI2LjgsIDYyLjc3IDE0LjM3IE0yNS42NyA2NC44NSBDMzcuODEgNDkuMTMsIDUxLjUyIDMzLjQ0LCA2MC42NCAyMS4zOCBNMjMuMzcgNjIuNjEgQzM1Ljg3IDUxLjUsIDQ0Ljc4IDM5LjM0LCA2Mi4wMyAyMC43MSBNMjguMiA2NC42NiBDMzkuMSA1My4wOSwgNDUuNDkgNDIuNjQsIDYxLjMzIDI2LjY2IE0yOS44NCA2My42MSBDMzguMTYgNTEuOCwgNDguNiA0MS4xMSwgNjIuMjcgMjcuMSBNMzUuNDQgNjQuMzcgQzQwLjY1IDUzLjM1LCA1MC41MyA0NS40OSwgNjEuMTEgMzQuMjkgTTM1LjU3IDY0LjM2IEM0NC44MiA1MC45MSwgNTUuMDMgMzkuNjIsIDYxLjgzIDMyLjY5IE00MS42NSA2NC40OCBDNDcuNzUgNTQuMjMsIDUyLjMyIDQ4LjQyLCA1OS44MSAzNy44MyBNMzkuOCA2NC41NCBDNDYuNTUgNTYuMDcsIDUyLjA4IDQ5LjcxLCA2MC45OSAzOC41MSBNNDQuMjcgNjIuMjggQzUwLjkxIDU1LjgyLCA1Ny4zNSA0OS4xMywgNjIuODggNDYuMzIgTTQ1LjU5IDYzLjEyIEM1Mi42MyA1Ni44OCwgNTguNDggNDguOTksIDYxLjIgNDUuMTggTTUxLjE1IDYyLjU1IEM1Mi42MyA1OS4xOSwgNTYuMDYgNTYuNjksIDYxLjkgNDkuMzEgTTQ5LjkgNjQuNjEgQzU0LjAzIDYwLjEyLCA1Ni44MyA1Ni44MywgNjEuMzUgNTAuNTYgTTU2LjQ2IDY0LjAxIEM1Ny43OCA2Mi40MiwgNTkuMjggNTkuOTYsIDYxLjQzIDU3LjY2IE01Ni4zMSA2My4yMyBDNTguMzUgNjEuMDUsIDU5LjMyIDU5LjM2LCA2MS4xNCA1Ny42IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMC41IiBmaWxsPSJub25lIj48L3BhdGg+PHBhdGggZD0iTTAuMTUgMC42NSBDMTMuMDYgLTAuMDQsIDI3LjI3IDAuMTYsIDU4LjYgMC45NyBNMC4xNCAtMC41OSBDMjEuMzQgLTEuMjUsIDQzLjk3IC0wLjg2LCA1OS4xNyAtMC42OCBNNTkuNDIgMS43NSBDNjEuMDggMjMuMDEsIDYxLjQ0IDQ2LjY0LCA1OS44MSA2MC4xOSBNNTguMDggLTAuNzkgQzU4LjE2IDE0LjM2LCA1OC4zNyAzMC4xNCwgNTkuMjQgNjAuMTggTTU4LjcyIDYwLjc2IEMzNy43OCA2Mi41MiwgMTcuNDkgNjEuMDcsIC0wLjg3IDYxLjYxIE01OC45IDYwLjg3IEM0Ny43NSA2MS4zNCwgMzQuMjUgNjEuMjcsIDAuMDYgNjEuNTEgTTEuNjIgNjAuOTUgQy0wLjQxIDQ0Ljg5LCAxLjg0IDIzLjgyLCAxLjUzIC0xLjI3IE0tMC4wNCA2MS4zNiBDLTEuNTYgNDYuODEsIC0wLjA4IDMxLjUyLCAwLjY0IDAuNTUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIj48L3BhdGg+PC9nPjxnIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzgyLjM2MTAwMjk3MTU4NTA0IDEzNy42OTA1NDQwMDc3ODMpIHJvdGF0ZSgwIDI5LjUgMzAuNSkiPjxwYXRoIGQ9Ik0wIDAgQzAgMCwgMCAwLCAwIDAgTTAgMCBDMCAwLCAwIDAsIDAgMCBNLTAuNjEgNS44NyBDMC43MiA0LjM1LCAzLjIxIDIuMjEsIDUuMyAtMC4yNyBNLTAuMTIgNi4zOCBDMS41MSAzLjg4LCAzLjc0IDEuODcsIDUuMzUgMCBNMS40NCAxMi45NCBDMi40NyA3LjYzLCA2LjM4IDQuODIsIDExLjQgLTEuMjYgTTAuMjcgMTIuNDcgQzIuODkgOC43NiwgNS4zMSA3LjI2LCAxMC4yNSAtMC4wNCBNMS41NCAxOC4xMyBDNS42NCAxMy40MSwgNS41OCA5LjczLCAxNS4yNCAwLjM0IE0tMC43MyAxOC41NSBDMy4xMyAxNC4xNywgNS45MiAxMC4zOCwgMTYuNTkgMC4yNCBNLTEuMDQgMjUuOCBDNy40MiAxNS4yMiwgMTQuNSA2LjQsIDIwLjg4IC0xLjQgTTAuNzEgMjMuNjYgQzcuMTMgMTYuMzcsIDE0LjczIDcuNDksIDIwLjU5IC0wLjAzIE0tMS45OCAyOC41OCBDOC4wOSAyMC4xMiwgMTkuMTMgOS41LCAyNC45OCAxLjgzIE0tMC4yMyAzMS4zMiBDOS4yMiAxOS40NCwgMTguNjIgOC4wNiwgMjUuOTMgLTAuNjQgTTEuMTYgMzguNTcgQzYuOTQgMzAuMDYsIDE0LjY0IDIwLjU3LCAzMC4xNSAtMC41MiBNLTAuMTkgMzYuOTcgQzcuODYgMjcuMzIsIDE2LjM0IDE1LjcyLCAzMS4yMiAtMC41OCBNLTAuMiA0Mi4yNiBDOC45NyAyOS41MiwgMjEuMzcgMTcuODIsIDM4LjQ1IC0xLjYyIE0tMC4zMyA0Mi42MiBDOC4xNCAzMi45OCwgMTYuMzMgMjMuNzUsIDM2LjkgLTAuNzQgTS0xLjAxIDQ5LjI0IEMxNS42NCAzNC4wMywgMzAuNDYgMTYuNTgsIDQxLjE4IDEuMTIgTS0wLjA1IDQ4LjM4IEMxMS42MyAzNi4zNywgMjMuMDkgMjMuMiwgNDEuNzEgMC4zOCBNLTEuNDggNTUuMzUgQzIwLjUzIDM0LjQ2LCAzNi40NSAxMS41MywgNDguMjMgLTEuNTIgTTAuNzUgNTUuNDcgQzExLjM3IDQyLjg3LCAyMi4xMSAyOS4zNSwgNDcuNjUgLTAuMDYgTS0xLjczIDU5LjE2IEMxNi42MSA0My4wOSwgMzAuNjMgMjguOCwgNTMuODcgLTAuMDkgTTAuNjkgNjEuNTYgQzE5LjQ4IDM2LjkyLCA0MC45OSAxMi42NywgNTIuNDMgLTAuOTggTTIuNjEgNjUuMzYgQzE4LjE3IDQ2Ljc0LCAyOC4xMSAzNS4wNSwgNTguMDcgMS45MyBNMi4wMyA2My45NSBDMjAuMjkgNDIuNDEsIDM4LjE1IDIyLjQ2LCA1OC41IC0wLjAzIE04LjQ5IDYzLjIzIEMyMC40OCA1MC4zMywgMzYuNDMgMzIuMzYsIDYyLjM0IDAuODYgTTguMyA2Mi45OCBDMjAuMzUgNDcuODYsIDM0LjU1IDMxLjksIDYxLjQ2IDIuODUgTTE1LjI2IDY1LjEgQzMyLjk4IDQzLjc1LCA0Ny4zNiAyNC4xNCwgNjEuNjcgMTAuMjEgTTEyLjg3IDY0LjIxIEMyNS4xMyA1MC45MywgMzguNTYgMzYuMjgsIDYxLjczIDcuODEgTTE5LjE5IDY0Ljc2IEMyOS44MSA0OS42NSwgNDUuODQgMzUuMzQsIDYyLjI3IDE0LjYxIE0xOS4wOSA2My43NyBDMzQuNjQgNDcuMDQsIDQ5LjEzIDI3LjI0LCA2Mi45MyAxNC43NCBNMjQuNzEgNjIuODYgQzMyLjY3IDUyLjE2LCAzOS4yMiA0NS4zNiwgNjMuMDMgMTkuMjkgTTI0LjE3IDYzLjU3IEMzNC44MyA1Mi4zOCwgNDQuNDggNDEuMTIsIDYwLjk1IDE5LjY4IE0yOS42OCA2My40MSBDNDAuMDQgNTQuMzQsIDQ4LjU2IDQzLjAyLCA1OS45MiAyNS41MiBNMzAuMTUgNjQuNjMgQzQwLjEgNTEuNTEsIDUyLjM0IDM5LjIzLCA2MS4xIDI2LjAyIE0zNS4yMyA2NC4xNyBDNDQuMzQgNTQuNzgsIDUxLjgzIDQ2Ljg3LCA2Mi42NCAzMS4yNiBNMzQuMzcgNjMuMzQgQzQwLjM4IDU4LjI0LCA0NS43NiA1MS41OSwgNjIuMjggMzIuMSBNMzkuMDYgNjUuMTUgQzQ1LjY2IDU2LjIsIDUwLjY0IDQ4Ljg4LCA2MS4xNSAzNy44NyBNNDAuNCA2NC43OSBDNDYuMzIgNTYuODIsIDUzLjY4IDQ3LjcxLCA2Mi4zMiAzOS42NyBNNDUuMjQgNjIuOTUgQzUxLjg1IDU3LjIyLCA1Ni45NCA0OS43MSwgNjAuMjIgNDQuMDUgTTQ0LjU3IDYyLjk2IEM0OS42MSA1OC4wNywgNTMuMjMgNTQuNjgsIDYyLjA3IDQ0LjczIE00OS43MSA2My4zOCBDNTMuNzkgNTcuMzgsIDU5LjY0IDU1LjQ0LCA2MS45NSA1Mi4yOCBNNTAuODUgNjQuMDUgQzUzLjUxIDU5LjM0LCA1OC4wNCA1NS4xNCwgNjIuNTMgNTAuMTQgTTU2LjY0IDYzLjQyIEM1Ny44IDYyLjAyLCA1OC4zNSA2MS4xOSwgNjEuOSA1Ny45IE01NS45NCA2My4yMSBDNTcuMjcgNjIuMDQsIDU4LjM5IDYxLjEsIDYxLjU4IDU3LjAzIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMC41IiBmaWxsPSJub25lIj48L3BhdGg+PHBhdGggZD0iTS0xLjM2IDEuMzIgQzE5LjczIDAuOSwgMzYuMzYgMS42NSwgNjAuNTUgMC42OSBNLTAuNCAtMC42IEMyMy4wOCAtMS4wOCwgNDUuNzIgLTEuMDMsIDU4LjMxIC0wLjI2IE01Ny4zNiAxLjE5IEM2MS4wOSAxNi40NCwgNTkuMjYgMzAuNTQsIDU5IDYyLjIxIE01OS4zMSAtMC45OCBDNTcuOTUgMjAuNDEsIDU4LjgzIDQyLjE0LCA1OS42NiA2MS43NyBNNjAuMDMgNjAuODMgQzQ1Ljg0IDU5Ljg2LCAzNi4yMyA2MC45OCwgLTAuNyA2Mi42NyBNNTguMzYgNjAuMzYgQzM3LjY3IDYxLjMsIDE0LjQyIDYxLjgxLCAtMC45OCA2MS4yMyBNMS4wOSA2Mi41NSBDMi4wMiAzOC41NywgLTAuMDUgMTcuNDQsIDEuOTYgMC45NiBNLTAuNzYgNjEuNTMgQzAuMzIgNDAuOTUsIDEgMjIuMjUsIDAuNjggMC44MiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPjwvcGF0aD48L2c+PGcgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDMuNDgxMzM2MDA3ODIzMTMgNzIuMTU2Mjg4MTM4NTcwNjkpIHJvdGF0ZSgwIDI5LjUgMzAuNSkiPjxwYXRoIGQ9Ik0tMC4wOCAtMS4zOCBMNTcuOTEgLTAuMTUgTDU5LjMxIDYyLjgyIEwtMS43OCA2MC43MyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiIGZpbGw9IiMyMjhiZTYiPjwvcGF0aD48cGF0aCBkPSJNLTAuMiAtMC4yNiBDMTMuMjMgMS45NywgMjEuOTUgMS44MywgNTkuMTIgMS4wMyBNMC44MSAtMC4wMyBDMTYuODUgMS4xOCwgMzUuMTcgLTAuNDYsIDU5Ljc2IC0wLjY0IE01OC45MSAwLjcxIEM1Ny42MSAxNC44OCwgNjAuNTYgMjcuNTYsIDYwLjI4IDYyLjA5IE01OC43OCAtMC40NyBDNjAuNDggMjMuNTIsIDU5LjczIDQ1LjQ5LCA1OS45NSA2MC4yNCBNNjAuMjcgNjIuMjcgQzM5LjU1IDYyLjQyLCAxNy4zMiA2Mi40NywgLTAuMDEgNjEuMDggTTU4LjcyIDYwLjkyIEM0MS41NiA2MS43NiwgMjMuNTQgNjEuNDIsIDAuODQgNjEuMzggTS0wLjg0IDYyLjkyIEMtMC4zNSA0Mi4xOSwgMC40MyAyMi4wOCwgMC43NCAtMC44NiBNMC4wNyA2MC42OSBDMC45NSA0NS45NiwgMS4zNCAzMS42MywgMC4xNyAwLjM2IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyBzdHJva2UtbGluZWNhcD0icm91bmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2NC40ODE3NzU0MzMyNTM1IDczLjM5Mjc4MzUzMjMyOTQ3KSByb3RhdGUoMCAyOS41IDMwLjUpIj48cGF0aCBkPSJNMS4wMSAtMS41MyBMNTcuMiAtMS4zMSBMNjAuNzEgNjAuNiBMLTAuNTkgNjAuMzIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjMjI4YmU2Ij48L3BhdGg+PHBhdGggZD0iTTAuMDggMC4wMiBDMTkuMDYgMC40NSwgMzQuNTIgLTAuMTYsIDU5LjY3IDEuMjUgTTAuMzggMC4yIEMxOC4zMiAtMC42MiwgMzUuOTcgMC40NywgNTguODYgMC4zNiBNNTguMTQgLTEuMzMgQzU3LjI0IDE5LjY3LCA1OS4yIDM5LjA2LCA1OS43OSA1OS40MiBNNTkuMzYgLTAuMDQgQzU3Ljc3IDIyLjU4LCA1OC4zOSA0Ni40MSwgNTkuOTEgNjAuMTEgTTYwLjYzIDYyLjEzIEM0MS4xNSA2MC4xNCwgMjUuMzggNjAuOTUsIDAuOTYgNTkuNDcgTTU5LjE3IDYxLjU0IEM0Ni4wNCA2MC4zNSwgMzIuNjcgNjEuODksIC0wLjQ4IDYwLjk5IE0xLjY3IDYwLjY5IEMyLjQzIDQ1Ljk2LCAtMS4zNCAzMi4xNywgLTAuMzggMC4wMSBNLTAuNiA2MS4xMSBDLTAuMDYgNDcuMjYsIC0wLjc1IDM0LCAwLjk3IC0wLjA5IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyBzdHJva2UtbGluZWNhcD0icm91bmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMyMy44MzM1NTQzMzM2NzIzNCA3NS4wNDE0NDQwNTczNDExNSkgcm90YXRlKDAgMjkuNSAzMC41KSI+PHBhdGggZD0iTTEuMDggLTEuNTggTDU3LjQ5IC0xLjk4IEw1Ny4xIDU5LjU2IEwwLjEzIDYxLjMxIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iIzIyOGJlNiI+PC9wYXRoPjxwYXRoIGQ9Ik0tMC44NiAtMS4zMyBDMTcuMzggLTAuMzgsIDM4LjUyIC0wLjgzLCA1OS43OSAtMS41OCBNMC4zNiAtMC4wNCBDMjEuNjggLTAuNjQsIDQ0LjY3IDAuMDUsIDU5LjkxIC0wLjg5IE02MC42MyAxLjEzIEM1Ny42IDE2LjM0LCA1OC43MyAzNC42MiwgNTkuOTYgNTkuNDcgTTU5LjE3IDAuNTQgQzU5LjQgMTMuMjEsIDU5LjQ0IDI4LjYyLCA1OC41MiA2MC45OSBNNjAuNjcgNjAuNjkgQzQ3IDYwLjcsIDI5LjMyIDYxLjI5LCAtMC4zOCA2MS4wMSBNNTguNCA2MS4xMSBDNDUuNjggNjAuNzUsIDMxLjk3IDYwLjk3LCAwLjk3IDYwLjkxIE0tMS4zMSA2Mi43MSBDMC4wNyAzOS4wMiwgLTAuMjEgMTcuMjgsIC0wLjM4IC0xLjMzIE0wLjQ0IDYwLjU4IEMwLjEzIDQxLjI0LCAwLjc4IDIwLjE2LCAtMC42NyAwLjA0IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyBzdHJva2UtbGluZWNhcD0icm91bmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM4NC4wMDk2NjM0OTY1OTY2IDc1LjA0MTQ0NDA1NzM0MTA0KSByb3RhdGUoMCAyOS41IDMwLjUpIj48cGF0aCBkPSJNLTEuNTYgLTEuOTcgTDU3LjY1IC0wLjk2IEw1OC40IDYyLjEgTC0wLjQyIDYwLjY2IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iIzIyOGJlNiI+PC9wYXRoPjxwYXRoIGQ9Ik0tMC4wMiAtMS4yOSBDMTguODkgMS41MiwgNDIuOTEgLTAuMDMsIDYwLjkgLTAuNjcgTTAuMDEgLTAuNzkgQzExLjgzIDAuMTQsIDIzLjc5IDAuMjIsIDU4LjcyIC0wLjI2IE01OC44MiAxLjAxIEM1Ny40NCAxMC41OCwgNTcuNjYgMjYuNDgsIDU4LjYgNjAuNDEgTTU4LjM0IDAuMzEgQzU4LjEyIDE2Ljk4LCA1OS4xNiAzMi4wNCwgNTguNzcgNjEuNDQgTTU5LjA4IDYyLjA4IEMzNy4yOSA1OS4xLCAxNi43NiA1OC43MSwgLTEuNDQgNjEuMTMgTTU5Ljc3IDYxLjYxIEM0MS4xMSA2MS41MiwgMjEuNTMgNjEuNDcsIC0wLjA0IDYxLjEgTS0xLjg2IDU5LjY5IEMtMS42IDQyLjk2LCAxLjY0IDI3LjY2LCAtMC42NyAxLjc3IE0tMC4yMSA2MC43NSBDMC40NSA0My44NCwgLTAuMjMgMjcuNiwgLTAuNDMgMC40NyIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPjwvcGF0aD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAgMTQuODY1MTE1MTgxNzAxNDEyKSByb3RhdGUoMCA2My4zOTk5NDA0OTA3MjI2ODUgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5zdHJ1Y3QgZm9vIHs8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM2LjM3ODU2ODQwMDE4NjIyNSA0Mi4wNjgwMTM4NDQzOTMzNikgcm90YXRlKDAgMzUuMTc5OTc3NDE2OTkyMTkgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjNWM5NDBkIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5jaGFyIGE7PC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNi4zNzg1Njg0MDAxODYxMSA3Mi45ODAzOTg2ODgzNjEzOSkgcm90YXRlKDAgNTMuODY5OTQ5MzQwODIwMzEgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjYzkyYTJhIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj51aW50MTZfdCBiOzwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzYuNzkwNzMzNTMxNDM5MTE2IDEwMi42NTYyODgxMzg1NzA2Mykgcm90YXRlKDAgNTIuOTQ5OTU4ODAxMjY5NTMgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMzY0ZmM3IiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5pbnQzMl90IGM7PC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMi40NzI5OTA3ODc1MTc2MzEgMTY0Ljg5MzIyMjk1Nzc1OTgpIHJvdGF0ZSgwIDcuNTM5OTkzMjg2MTMyODEyNSAxMikiPjx0ZXh0IHg9IjAiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPn07PC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNy4yMDI4OTg2NjI2OTIwMSAxMzEuMDk1NjgyMTk1MDIxMzcpIHJvdGF0ZSgwIDM0LjE5OTk3NDA2MDA1ODU5NCAxMikiPjx0ZXh0IHg9IjAiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiNlZWVlMDAiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPmNoYXIgZDs8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4NS41ODIzNDU5MTM3Mzg2IDI5LjcwMzA1OTkwNjgwNjA2KSByb3RhdGUoMCA2Ljg3OTk5NzI1MzQxNzk2OSAxMikiPjx0ZXh0IHg9IjAiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPjA8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4NC4zNDU4NTA1MTk5Nzk4MiA4OS44NzkxNjkwNjk3MzA2MSkgcm90YXRlKDAgNi4zOTk5OTM4OTY0ODQzNzUgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj40PC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxODQuNzU4MDE1NjUxMjMyOTQgMTUwLjg3OTYwODQ5NTE2MDgyKSByb3RhdGUoMCA3LjY0OTk5Mzg5NjQ4NDM3NSAxMikiPjx0ZXh0IHg9IjAiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPjg8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0Ny4xNTEwNzczNjQ4Nzg0IDkxLjkzOTk5NDcyNTk5NTEyKSByb3RhdGUoMCA1LjAxOTk5NjY0MzA2NjQwNiAxMikiPjx0ZXh0IHg9IjAiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPmM8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNi43MjQ4NDM5NzA5OTc4MiA4OS44MzE5NTc4NzYwNjQ5Nikgcm90YXRlKDAgNS4wMTk5OTY2NDMwNjY0MDYgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5jPC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyODkuMzczOTQzOTIxNDM5OSA4OS40MTk3OTI3NDQ4MTIwNykgcm90YXRlKDAgNS4wMTk5OTY2NDMwNjY0MDYgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5jPC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MDguNDg5NjY2ODUzNTMwMiA5MC42NTYyODgxMzg1NzA3NCkgcm90YXRlKDAgNS4wMTk5OTY2NDMwNjY0MDYgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5jPC90ZXh0PjwvZz48L3N2Zz4=" alt="struct padding" class=centered></p>
<p>You may already know this, but the compiler inserts padding to your structs in
order to properly align things.</p>
<p>There are a few interesting points to highlight:</p>
<ul>
 <li>You could insert another <code>char</code> after <code>a</code> without disturbing the layout of
 the rest of the struct. You could think of the pad byte as basically
 “free memory” that is not being used.</li>
 <li>The overall size of the struct is 12 bytes, even though an optimally packed
struct would only take up 8 bytes. That’s 50% bigger, and it might make
a difference in if there are lots of these structs in your application.</li>
 <li>There are 3 pad bytes after <code>d</code>, even though there’s nothing after <code>d</code> in
 the struct. This is because if you have an array of structs, like
 <code>struct foo foos[4]</code>, then <code>foos[1]</code> will be a properly aligned
 access (address aligns to a multiple of the alignment of the struct,
 which is 4).</li>
</ul>
<h2 id=3-you-can-rearrange-struct-fields-to-reduce-padding-the-compiler-wont-do-this-for-you>3: You can rearrange struct fields to reduce padding. The compiler won’t do this for you.</h2>
<p>By carefully rearranging struct fields, you can achieve a more optimal packing
while maintaining proper alignment.</p>
<p>Taking the prior example, you could do it this way:</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDQyNS44NzM3Mzg1ODMzMjMxIDE5MS42NjI3MTQ0MTMwNDA2NSIgd2lkdGg9IjQyNS44NzM3Mzg1ODMzMjMxIiBoZWlnaHQ9IjE5MS42NjI3MTQ0MTMwNDA2NSI+CiAgPCEtLSBzdmctc291cmNlOmV4Y2FsaWRyYXcgLS0+CiAgCiAgPGRlZnM+CiAgICA8c3R5bGUgY2xhc3M9InN0eWxlLWZvbnRzIj4KICAgICAgQGZvbnQtZmFjZSB7CiAgICAgICAgZm9udC1mYW1pbHk6ICJWaXJnaWwiOwogICAgICAgIHNyYzogdXJsKCJodHRwczovL2V4Y2FsaWRyYXcuY29tL1ZpcmdpbC53b2ZmMiIpOwogICAgICB9CiAgICAgIEBmb250LWZhY2UgewogICAgICAgIGZvbnQtZmFtaWx5OiAiQ2FzY2FkaWEiOwogICAgICAgIHNyYzogdXJsKCJodHRwczovL2V4Y2FsaWRyYXcuY29tL0Nhc2NhZGlhLndvZmYyIik7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSI0MjUuODczNzM4NTgzMzIzMSIgaGVpZ2h0PSIxOTEuNjYyNzE0NDEzMDQwNjUiIGZpbGw9IiNmZmZmZmYiPjwvcmVjdD48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCAxMCkgcm90YXRlKDAgNjMuMzk5OTQwNDkwNzIyNjU2IDEyKSI+PHRleHQgeD0iMCIgeT0iMCIgZm9udC1mYW1pbHk9IlZpcmdpbCwgU2Vnb2UgVUkgRW1vamkiIGZvbnQtc2l6ZT0iMjBweCIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9InN0YXJ0IiBzdHlsZT0id2hpdGUtc3BhY2U6IHByZTsiIGRpcmVjdGlvbj0ibHRyIiBkb21pbmFudC1iYXNlbGluZT0idGV4dC1iZWZvcmUtZWRnZSI+c3RydWN0IGZvbyB7PC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMi43NzYyNDAyMTc5Nzk1MzQgMTU3LjY2MjcxNDQxMzA0MDY1KSByb3RhdGUoMCA3LjUzOTk5MzI4NjEzMjgxMjUgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj59OzwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTEuNTE5NzYyNTU1NzUzMDA1IDQzLjQ5Mjk3MzA1NTk4NTQzKSByb3RhdGUoMCA1Mi41MjYzNjcxODc1IDExLjQwMDAwMDAwMDAwMDAwNikiPjx0ZXh0IHg9IjAiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjE5Ljg0NDMxODk5ODMyMDczcHgiIGZpbGw9IiMzNjRmYzciIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPmludDMyX3QgYzs8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUxLjEwNzU5NzQyNDQ5OTg4NiA3MS4xMDgwMzY4NDk5MzAyNykgcm90YXRlKDAgNTguODY5OTQ5MzQwODIwMzEgMTIpIj48dGV4dCB4PSIwIiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjYzkyYTJhIiB0ZXh0LWFuY2hvcj0ic3RhcnQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj51aW50MTZfdCBiOyA8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUxLjUxOTc2MjU1NTc1Mjg5IDk3LjQ4NjYwNTI1MDExNjI3KSByb3RhdGUoMCAzNS4xNzk5Nzc0MTY5OTIxOSAxMikiPjx0ZXh0IHg9IjAiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiM1Yzk0MGQiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPmNoYXIgYTs8L3RleHQ+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUyLjc1NjI1Nzk0OTUxMTY4IDEyNS4xMDE2NjkwNDQwNjExMSkgcm90YXRlKDAgMzQuMTk5OTc0MDYwMDU4NTk0IDEyKSI+PHRleHQgeD0iMCIgeT0iMCIgZm9udC1mYW1pbHk9IlZpcmdpbCwgU2Vnb2UgVUkgRW1vamkiIGZvbnQtc2l6ZT0iMjBweCIgZmlsbD0iI2VlZWUwMCIgdGV4dC1hbmNob3I9InN0YXJ0IiBzdHlsZT0id2hpdGUtc3BhY2U6IHByZTsiIGRpcmVjdGlvbj0ibHRyIiBkb21pbmFudC1iYXNlbGluZT0idGV4dC1iZWZvcmUtZWRnZSI+Y2hhciBkOzwvdGV4dD48L2c+PGcgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjEuMzMxNzk2NjMxOTUwNzQgMTAuNTE5NzYyNTU1NzUyODA2KSByb3RhdGUoMCAyMy45MDU1Nzc2MTI2Njg1OTQgMjIuMjU2OTE3MDg3NjU2OTg3KSI+PHBhdGggZD0iTS0xLjUzIDEuNTEgTDQ1Ljg1IC0xLjEgTDQ2LjE1IDQ0LjcgTDEgNDUuOTYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjNGM2ZWY1Ij48L3BhdGg+PHBhdGggZD0iTTAuOTYgLTAuNDcgQzE2LjU4IDEuMzMsIDM1LjY0IDAuMjUsIDQ2LjI4IDAuOTQgTS0wLjQ1IC0wLjA2IEMxOC4zNSAwLjM1LCAzNS43NiAtMC44OCwgNDguMjEgLTAuNTMgTTQ3LjI2IC0xLjIxIEM0Ni45NCAxNC44MywgNDYuNjggMzAuNjgsIDQ3Ljk2IDQyLjgzIE00Ny41OCAwLjUyIEM0OC4zIDguNTMsIDQ3LjcgMTguOCwgNDcuMjMgNDQuMjUgTTQ2LjczIDQ1LjEzIEMzMC41NSA0NS40MiwgMTQuNzYgNDQuNjUsIDAuOTggNDMuNjUgTTQ3LjI1IDQ1LjAzIEMzMi43MSA0NS4xMiwgMTcuODQgNDUuMjEsIC0wLjc1IDQ0LjE0IE0tMS41MyA0Mi42NiBDLTAuOSAzMy44NCwgMC44NSAyMi45LCAtMS40IDAuNzggTS0wLjYyIDQzLjkxIEMtMC40NCAzMC4yNCwgMC41OSAxNi42NSwgLTEgLTAuMjciIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIj48L3BhdGg+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0MC4yMTczNzc2MDE1NTI5MyAyMC43NzY2Nzk2NDM0MDk4MDcpIHJvdGF0ZSgwIDUuMDE5OTk2NjQzMDY2NDA2IDEyKSI+PHRleHQgeD0iNS4wMTk5OTY2NDMwNjY0MDYiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5jPC90ZXh0PjwvZz48ZyBzdHJva2UtbGluZWNhcD0icm91bmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2OS41NTUxMTY5ODg1NDA5MyAxMC4xMDc1OTc0MjQ0OTk5NzEpIHJvdGF0ZSgwIDIzLjkwNTU3NzYxMjY2ODU5NCAyMi4yNTY5MTcwODc2NTY5ODcpIj48cGF0aCBkPSJNMC45IDAuOTcgTDQ3LjMyIC0xLjE3IEw0OC4xNSA0NS43NiBMLTEuMyA0Mi42NiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiIGZpbGw9IiM0YzZlZjUiPjwvcGF0aD48cGF0aCBkPSJNMC43OSAxLjA0IEMxNC41NSAtMS44MywgMzAuMiAwLjExLCA0OC4xIC0xLjUyIE0wLjIgMC4yNSBDMTYuNTIgLTAuMDcsIDMzLjk1IDEuMDIsIDQ4Ljc5IC0wLjY1IE00OC41OSAtMS4xMiBDNDcuNTQgMTQuMDUsIDQ1LjU4IDMyLjA5LCA0Ni4wOCA0NS4zNSBNNDguMTcgMC4yNSBDNDkuMTUgMTcuOTEsIDQ4LjE2IDM1Ljc3LCA0Ny4xMSA0NS4yNCBNNDkuNjEgNDUuMjYgQzMzLjU3IDQzLjA5LCAyMC4xNCA0NC43MywgLTEuMzUgNDMuMjIgTTQ4LjUyIDQ1LjQ3IEMzMi42OSA0NC4yOSwgMTcuMDggNDUuMjcsIDAuMDUgNDUuMjggTS0xLjEzIDQ1LjY3IEMwLjk5IDMyLjczLCAwLjkxIDIwLjMxLCAtMS44NyAxLjczIE0tMC4xNSA0NS40NCBDLTAuMDcgMjcuODYsIC0wLjA1IDkuNTgsIC0wLjQ2IDAuNjgiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIj48L3BhdGg+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI4OC40NDA2OTc5NTgxNDMxIDIwLjM2NDUxNDUxMjE1Njk3Mykgcm90YXRlKDAgNS4wMTk5OTY2NDMwNjY0MDYgMTIpIj48dGV4dCB4PSI1LjAxOTk5NjY0MzA2NjQwNiIgeT0iMCIgZm9udC1mYW1pbHk9IlZpcmdpbCwgU2Vnb2UgVUkgRW1vamkiIGZvbnQtc2l6ZT0iMjBweCIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPmM8L3RleHQ+PC9nPjxnIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzE5LjAxNDkzMjczODg4OTcgMTEuMzQ0MDkyODE4MjU4NjczKSByb3RhdGUoMCAyMy45MDU1Nzc2MTI2Njg1OTQgMjIuMjU2OTE3MDg3NjU2OTczKSI+PHBhdGggZD0iTS0xLjMgLTEuODUgTDQ4LjE0IC0wLjQ5IEw0Ny43NSA0Ni4yOSBMMS43OSA0NC44NyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiIGZpbGw9IiM0YzZlZjUiPjwvcGF0aD48cGF0aCBkPSJNMC4yOSAtMS41MiBDMTEuNDggMS4xNywgMTkuNzkgMC4zMiwgNDguMzEgLTAuMzggTTAuOTggLTAuNjUgQzEzLjIgLTEuMDksIDI1LjA2IDAuMDQsIDQ3LjI1IDAuMDMgTTQ2LjA4IDAuODQgQzQ5LjM2IDExLjA5LCA0Ni41IDE5LjU5LCA0OC4zMSA0Ni40NyBNNDcuMTEgMC43MyBDNDcuNTQgMTUuMDIsIDQ4LjA4IDI5LjA4LCA0OC4xOCA0My45MiBNNDYuNDYgNDMuMjIgQzM3LjQ0IDQzLjA0LCAyNS45NCA0NS45NiwgMS45MSA0NC4yMSBNNDcuODYgNDUuMjggQzMzLjQ5IDQ1LjA0LCAxOS4zNyA0NC4zOCwgMC41OCA0NS4wMyBNLTEuODcgNDYuMjQgQzEuNTEgMzEuMjksIDAuODEgMTguMDEsIDEuODYgLTAuMTkgTS0wLjQ2IDQ1LjIgQzAuNDkgMjkuMjksIC0wLjIxIDEyLjUsIDAuMTcgMC42MiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPjwvcGF0aD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzM3LjkwMDUxMzcwODQ5MTg3IDIxLjYwMTAwOTkwNTkxNTY0Nikgcm90YXRlKDAgNS4wMTk5OTY2NDMwNjY0MDYgMTIpIj48dGV4dCB4PSI1LjAxOTk5NjY0MzA2NjQwNiIgeT0iMCIgZm9udC1mYW1pbHk9IlZpcmdpbCwgU2Vnb2UgVUkgRW1vamkiIGZvbnQtc2l6ZT0iMjBweCIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPmM8L3RleHQ+PC9nPjxnIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzY4LjA2MjU4MzM1Nzk4NTkgMTEuMzQ0MDkyODE4MjU4NjE2KSByb3RhdGUoMCAyMy45MDU1Nzc2MTI2Njg1OTQgMjIuMjU2OTE3MDg3NjU3KSI+PHBhdGggZD0iTTEuNzkgMC4zNSBMNDYuMDUgLTAuMDMgTDQ2LjE0IDQzLjY5IEwtMS42NyA0NS4yNiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjAiIGZpbGw9IiM0YzZlZjUiPjwvcGF0aD48cGF0aCBkPSJNMC41IC0wLjM4IEMxNi42MyAwLjk3LCAzNi4xNCAxLjg2LCA0Ni41IDEuMSBNLTAuNTYgMC4wMyBDOS45MiAtMS4xNCwgMjEuODQgLTEuMDUsIDQ4LjIzIDAuOTkgTTQ4LjMxIDEuOTUgQzQ3Ljk0IDE3LCA0OC4xOSAzMi42NSwgNDkuMjcgNDMuOTggTTQ4LjE4IC0wLjU5IEM0Ny4xNiAxNi43MywgNDcuOTggMzQuMzMsIDQ3LjE2IDQ0LjY1IE00OS43MiA0NC4yMSBDMzYuODggNDMuMjcsIDI4LjA5IDQ0Ljk2LCAxLjU0IDQzLjc2IE00OC4zOSA0NS4wMyBDMzIuOTYgNDQuNzIsIDE3Ljc5IDQzLjMxLCAwLjg2IDQ1LjM3IE0xLjg2IDQ0LjMzIEMwLjgzIDMxLjI4LCAtMS4zNyAxNy40MiwgMS4zNiAwLjkgTTAuMTcgNDUuMTQgQy0wLjU0IDI4LjA3LCAwLjI3IDEzLjIyLCAtMC4wMyAwLjg5IiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+PC9wYXRoPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzODYuOTQ4MTY0MzI3NTg4MSAyMS42MDEwMDk5MDU5MTU1OSkgcm90YXRlKDAgNS4wMTk5OTY2NDMwNjY0MDYgMTIpIj48dGV4dCB4PSI1LjAxOTk5NjY0MzA2NjQwNiIgeT0iMCIgZm9udC1mYW1pbHk9IlZpcmdpbCwgU2Vnb2UgVUkgRW1vamkiIGZvbnQtc2l6ZT0iMjBweCIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPmM8L3RleHQ+PC9nPjxnIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjIwLjA5NTMwMTIzODE5MTk1IDU1Ljg1NzkyNjk5MzU3MjYyKSByb3RhdGUoMCAyMy45MDU1Nzc2MTI2Njg1OTQgMjIuMjU2OTE3MDg3NjU2OTczKSI+PHBhdGggZD0iTS0wLjQ1IC0wLjYxIEw0OC4wMyAtMS42NCBMNDkuNjEgNDQuODEgTDAuOTUgNDUuNDkiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIwIiBmaWxsPSIjZmE1MjUyIj48L3BhdGg+PHBhdGggZD0iTTEuMTUgMS4xNCBDOC4wNSAxLjUsIDE5LjM5IDAuMjUsIDQ4LjA5IC0wLjI4IE0tMC4wNiAtMC44IEMxMC43NiAwLjUxLCAyMy42OCAwLjYzLCA0Ny4wNCAwLjUxIE00OS41MiAwLjY4IEM0Ni41MiA5LjA0LCA0Ny4yOSAyMC4zNSwgNDcuMDggNDUuNiBNNDguMzQgLTAuNzcgQzQ3LjUzIDEyLjU0LCA0OS4xIDI1Ljg5LCA0Ni44MyA0NC45MyBNNDYuNDUgNDUuMjcgQzI4LjA1IDQyLjQ4LCAxMC44MiA0Mi45MiwgMS4zNSA0My43MiBNNDcuMDggNDQuNDQgQzM2LjEyIDQzLjkxLCAyMi40MSA0NC43MSwgMC43OSA0NS4wOCBNMC40NCA0NS4yNSBDLTEuMTIgMzUuMDcsIC0wLjkgMjUuODIsIDEuMTEgLTAuODIgTS0wLjMzIDQ0LjU1IEMwLjQ3IDM0LjE2LCAtMC44IDIyLjIsIDAuMDMgMC41NiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPjwvcGF0aD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjM4LjkyMDg4NDY0OTIwMDQgNjYuMTE0ODQ0MDgxMjI5NTkpIHJvdGF0ZSgwIDUuMDc5OTk0MjAxNjYwMTU2IDEyKSI+PHRleHQgeD0iNS4wNzk5OTQyMDE2NjAxNTYiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5iPC90ZXh0PjwvZz48ZyBzdHJva2UtbGluZWNhcD0icm91bmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2OC4zMTg2MjE1OTQ3ODIzNyA1NS44NTc5MjY5OTM1NzI2Mikgcm90YXRlKDAgMjMuOTA1NTc3NjEyNjY4NTk0IDIyLjI1NjkxNzA4NzY1Njk3MykiPjxwYXRoIGQ9Ik0tMS4wNSAwLjE2IEw0Ny4zMyAxLjI5IEw0Ni41MSA0Mi45NCBMMC43OSA0My4xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iI2ZhNTI1MiI+PC9wYXRoPjxwYXRoIGQ9Ik0wLjk1IDAuOTggQzEyLjIzIDAuMTUsIDIxLjM5IC0xLjg2LCA0Ny43NCAtMS45NyBNLTAuOCAtMC41MyBDMTkuNjcgLTAuMjMsIDM4Ljg5IDEuMzcsIDQ3LjU5IDAuMzggTTQ3LjQ4IDEuOTggQzQ3LjAyIDEwLjcsIDQ4LjI1IDE5LjYxLCA0Ny43NiA0NC4yMSBNNDcuNDQgMCBDNDcuNjkgMTEuODgsIDQ3LjkyIDI1LjE5LCA0OC4zIDQ0LjggTTQ1Ljg1IDQzLjcyIEMzNS45OSA0My42NywgMjUuODQgNDQuMDEsIC0wLjcgNDMuNDYgTTQ4LjY5IDQzLjk0IEMyOS40NSA0NS43LCAxMC44NiA0NC43MSwgMC43OSA0NS4wNyBNLTEuNTYgNDMuNTQgQzEuNzYgMjkuMjcsIDEuNzYgMTEuOTQsIC0xLjE3IDEuMzcgTTAuMjYgNDUuMDMgQzEuMjEgMjkuNTgsIC0wLjU2IDE0LjIzLCAtMC4wNSAwLjQiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIj48L3BhdGg+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI4Ny4xNDQyMDUwMDU3OTA4IDY2LjExNDg0NDA4MTIyOTU5KSByb3RhdGUoMCA1LjA3OTk5NDIwMTY2MDE1NiAxMikiPjx0ZXh0IHg9IjUuMDc5OTk0MjAxNjYwMTU2IiB5PSIwIiBmb250LWZhbWlseT0iVmlyZ2lsLCBTZWdvZSBVSSBFbW9qaSIgZm9udC1zaXplPSIyMHB4IiBmaWxsPSIjMDAwMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBzdHlsZT0id2hpdGUtc3BhY2U6IHByZTsiIGRpcmVjdGlvbj0ibHRyIiBkb21pbmFudC1iYXNlbGluZT0idGV4dC1iZWZvcmUtZWRnZSI+YjwvdGV4dD48L2c+PGcgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNjcuMjM4MjUzMDk1NDgwMSA1Ni42ODIyNTcyNTYwNzg0Nikgcm90YXRlKDAgMjMuOTA1NTc3NjEyNjY4NTk0IDIyLjI1NjkxNzA4NzY1NykiPjxwYXRoIGQ9Ik0wLjMxIC0wLjA4IEw0OC4wNCAtMS4xOCBMNDkuMTIgNDUuOTMgTC0wLjQxIDQ1LjI1IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iI2VlZWUwMCI+PC9wYXRoPjxwYXRoIGQ9Ik0wLjMxIC0xLjg0IEM4LjYzIDAuNTgsIDIwLjY3IC0wLjkxLCA0Ni43MiAtMC4xIE0tMC4yMiAwLjAyIEMxMy41OCAwLjgyLCAyNy4wMyAtMC41OCwgNDcuNiAwLjYgTTQ3LjQ1IDEuOSBDNDguODQgMTQuNDQsIDQ3LjM1IDI4LjUyLCA0Ny41NiA0NC45NCBNNDcuMTggMC45OSBDNDguMDQgMTUuNSwgNDguNzEgMzAuMjIsIDQ3LjQyIDQzLjYxIE00OC45IDQzLjIzIEMzMy45NSA0NC45NywgMTkuNiA0My4yLCAxLjczIDQzLjEzIE00OC41OSA0NS40MiBDMzAuMjcgNDMuMTQsIDExLjUgNDQuMDQsIC0wLjYzIDQ0LjE2IE0xLjI3IDQ0LjA2IEMxLjg4IDM2LjA5LCAyLjI2IDIyLjY5LCAxLjQyIC0xLjgxIE0wLjYyIDQ0LjYzIEMxLjIzIDMwLjc0LCAxLjI0IDE5LjU2LCAtMC42MSAtMC4yNiIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPjwvcGF0aD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzg1LjQ1MzgzNTg5NjEzNyA2Ni45MzkxNzQzNDM3MzU0Mykgcm90YXRlKDAgNS42ODk5OTQ4MTIwMTE3MTkgMTIpIj48dGV4dCB4PSI1LjY4OTk5NDgxMjAxMTcxOSIgeT0iMCIgZm9udC1mYW1pbHk9IlZpcmdpbCwgU2Vnb2UgVUkgRW1vamkiIGZvbnQtc2l6ZT0iMjBweCIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPmQ8L3RleHQ+PC9nPjxnIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzE4LjYwMjc2NzYwNzYzNjkgNTUuODU3OTI2OTkzNTcyNTA1KSByb3RhdGUoMCAyMy45MDU1Nzc2MTI2Njg1OTQgMjIuMjU2OTE3MDg3NjU2OTczKSI+PHBhdGggZD0iTTAuNDUgMSBMNDYuNTEgLTAuMTEgTDQ5LjE4IDQ1Ljc5IEwtMC41OCA0NS4zIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMCIgZmlsbD0iIzgyYzkxZSI+PC9wYXRoPjxwYXRoIGQ9Ik0xLjQ0IDAuMyBDMTYuODcgMC44MiwgMjkuMTkgLTEuNTQsIDQ5LjM5IDAuMzcgTTAuOTggMC43NiBDMTIuOTQgMC4wNCwgMjYuOTYgMC42MiwgNDcuNDIgLTAuMjcgTTQ4LjcxIDEuNzggQzQ4Ljg3IDExLjU0LCA0Ni41NCAyMy44NCwgNDguNzUgNDQuODMgTTQ2Ljk0IDAuNTMgQzQ4IDEzLjQ3LCA0OC4yMiAyNS42MywgNDcuNzggNDQuNDQgTTQ5LjA3IDQ1LjcyIEMzNC4yNyA0Mi42MSwgMjAuMDMgNDMuMzgsIDEuMDQgNDQuNDkgTTQ4LjYyIDQzLjk5IEMzMy40IDQzLjczLCAxNi43OSA0My4zNiwgMC41NiA0NC4xNiBNLTEuOTMgNDUuMDkgQy0xLjExIDI5Ljg1LCAtMC45OSAxMi45MSwgLTAuMjYgLTEuMjIgTS0wLjEgNDQuNjMgQzAuODQgMzUuNCwgLTAuNjkgMjYuMDEsIC0wLjg0IDAuNDEiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIj48L3BhdGg+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMzNS44MzgzNDcwNTEzNjAyIDY2LjExNDg0NDA4MTIyOTQ4KSByb3RhdGUoMCA2LjY2OTk5ODE2ODk0NTMxMjUgMTIpIj48dGV4dCB4PSI2LjY2OTk5ODE2ODk0NTMxMjUiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlOyIgZGlyZWN0aW9uPSJsdHIiIGRvbWluYW50LWJhc2VsaW5lPSJ0ZXh0LWJlZm9yZS1lZGdlIj5hPC90ZXh0PjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTguMjUwNTQ5MjgxNzg3OCAyMS42NDgyMjEwOTk1ODEyOTIpIHJvdGF0ZSgwIDYuODc5OTk3MjUzNDE3OTY5IDEyKSI+PHRleHQgeD0iMCIgeT0iMCIgZm9udC1mYW1pbHk9IlZpcmdpbCwgU2Vnb2UgVUkgRW1vamkiIGZvbnQtc2l6ZT0iMjBweCIgZmlsbD0iIzAwMDAwMCIgdGV4dC1hbmNob3I9InN0YXJ0IiBzdHlsZT0id2hpdGUtc3BhY2U6IHByZTsiIGRpcmVjdGlvbj0ibHRyIiBkb21pbmFudC1iYXNlbGluZT0idGV4dC1iZWZvcmUtZWRnZSI+MDwvdGV4dD48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTk3LjQyNjIxOTAxOTI4MjAzIDY4LjYzNTA0NjA2MjQxMjc1KSByb3RhdGUoMCA2LjM5OTk5Mzg5NjQ4NDM3NSAxMikiPjx0ZXh0IHg9IjAiIHk9IjAiIGZvbnQtZmFtaWx5PSJWaXJnaWwsIFNlZ29lIFVJIEVtb2ppIiBmb250LXNpemU9IjIwcHgiIGZpbGw9IiMwMDAwMDAiIHRleHQtYW5jaG9yPSJzdGFydCIgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmU7IiBkaXJlY3Rpb249Imx0ciIgZG9taW5hbnQtYmFzZWxpbmU9InRleHQtYmVmb3JlLWVkZ2UiPjQ8L3RleHQ+PC9nPjwvc3ZnPg==" alt="no padding" class=centered></p>
<p>In fact, if you order from largest to smallest, then you will always
achieve optimal packing.</p>
<p>Truthfully, when I’m creating a struct, I don’t give much thought to
reordering fields to save a few bytes. But if you’re planning to instantiate
a lot of them, it might make sense. This is probably in the realm of
“premature optimization” unless you’ve benchmarked and measured the potential
gains by reordering.</p>
<p>It’s tempting to think the compiler will do this for you, but it’s not allowed
to, for <a href=https://stackoverflow.com/a/9487640>several reasons</a>.</p>
<h2 id=4-your-compiler-can-detect-unaligned-access>4: Your compiler can detect unaligned access</h2>
<p>Suppose you have this program:</p>
<pre class="line-numbers language-c" tabindex=0><code class=language-c><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdint.h&gt;</span></span>

<span class="token class-name">uint8_t</span> <span class="token function">read_as_u8</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">uint8_t</span><span class="token operator">*</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">uint8_t</span><span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">uint16_t</span> <span class="token function">read_as_u16</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">uint8_t</span><span class="token operator">*</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">uint16_t</span><span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">uint8_t</span> data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x11</span><span class="token punctuation">,</span> <span class="token number">0x22</span><span class="token punctuation">,</span> <span class="token number">0x33</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">read_as_u8</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">read_as_u16</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>The call to <code>read_as_u16(&amp;data[1])</code> will result in an unaligned read because
we are reading from an address that is not aligned to a 2-byte boundary
(i.e. the alignment of a <code>uint16_t</code>). The call to <code>read_as_u8</code> will not result
in an unaligned read, because <code>uint8_t</code> has an alignment of 1.</p>
<p>Will the compiler be able to detect this unaligned access for us?
If you enable <code>-Wcast-align</code>, you might get a warning. Or you might not.</p>
<p>On my machine (x86_64), and an older version of gcc (7.5.0), I get:</p>
<pre><code>$ gcc -Wcast-align align.c
$
</code></pre>
<p>Hmm, it didn’t warn me. There are two reasons for that:</p>
<ol>
 <li>According to
<a href=http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-1-manual.pdf>Intel’s Basic Architecture Manual</a>:</li>
</ol>
<blockquote>
 <p>Words, doublewords, and quadwords do not need to be aligned in memory on
natural boundaries.
…
However, to improve the performance of programs, data structures (especially
stacks) should be aligned on natural boundaries whenever possible.</p>
</blockquote>
<p>So, my processor doesn’t have any alignment requirements whatsoever.</p>
<ol>
 <li><a href=http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html>GCC’s documentation</a>
for <code>-Wcast-align</code> states:</li>
</ol>
<blockquote>
 <p>Warn whenever a pointer is cast such that the required alignment of the target is increased.</p>
</blockquote>
<p>Since my target (x86_64) doesn’t require alignment, then GCC didn’t warn me.</p>
<p>But even if the target doesn’t require alignment, there are still potential
performance problems with unaligned access (as indicated by the Intel manual),
so it would be nice to get the warning.</p>
<p>As of GCC 8, you can use <code>-Wcast-align=strict</code> to emit a warning even if the
target doesn’t require alignment, which will produce the warning:</p>
<pre><code>&lt;source&gt;: In function 'read_as_u16':
&lt;source&gt;:9:13: warning: cast increases required alignment of target type [-Wcast-align]
    9 |     return *(const uint16_t*)data;
      |             ^
Compiler returned: 0
</code></pre>
<p>It’s generally recommended to always enable <code>-Wcast-align=strict</code> (or just
<code>-Wcast-align</code> if you can’t use <code>=strict</code>), since there are many targets
which have alignment requirements, and it’s not included in <code>-Wall</code> or
<code>-Wextra</code>.</p>
<p>You can also detect unaligned memory access at runtime by compiling
with <code>-fsanitize=alignment</code>:</p>
<pre><code>$ gcc -Wcast-align -fsanitize=alignment align.c
$ UBSAN_OPTIONS=print_stacktrace=1 ./a.out
align.c:8:12: runtime error: load of misaligned address 0x7ffdebd31b25 for type 'const uint16_t', which requires 2 byte alignment
0x7ffdebd31b25: note: pointer points here
 1c d3 eb 00 11 22 33  00 3b 69 96 f6 e9 16 7a  70 08 00 57 50 56 00 00  87 fc 5c 3a f4 7f 00 00  00
             ^
    #0 0x565057000804 in read_as_u16 (/home/nick/src/scratch/align/a.out+0x804)
    #1 0x565057000854 in main (/home/nick/src/scratch/align/a.out+0x854)
    #2 0x7ff43a5cfc86 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21c86)
    #3 0x5650570006e9 in _start (/home/nick/src/scratch/align/a.out+0x6e9)
</code></pre>
<p>It even gives you a helpful memory dump showing exactly where the unaligned access
was attempted.</p>
<h2 id=5-you-can-tell-the-compiler-to-remove-padding-from-structs>5: You can tell the compiler to remove padding from structs</h2>
<p>Suppose you have data that you want to send “over the wire” to another
computer. The destination computer may not have the same processor
architecture or word size as the source computer, and the endianness might be
different too.</p>
<p>You should usually prefer well-known serialization methods like
protobuf or CBOR for data exchange, as they handle the packing/unpacking of
data for you, but sometimes sending raw binary can make sense.</p>
<p>If you want to send the data as raw binary, then you will generally want to
remove all padding, in case the destination processor has different alignment
requirements. Otherwise, the receiving end may not be able to read the data.</p>
<p>In these cases, you can tell the compiler to remove all padding with <code>#pragma
pack(1)</code>:</p>
<pre class="line-numbers language-c" tabindex=0><code class=language-c><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdint.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">EVAL_PRINT</span><span class="token expression"><span class="token punctuation">(</span>expr<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span></span><span class="token string">"%-20s = %u\n"</span><span class="token expression"><span class="token punctuation">,</span> #expr<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">uint8_t</span><span class="token punctuation">)</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>

<span class="token keyword">struct</span> <span class="token class-name">foo</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> a<span class="token punctuation">;</span>
    <span class="token class-name">int32_t</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">pack</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span></span>
<span class="token keyword">struct</span> <span class="token class-name">foo_packed</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> a<span class="token punctuation">;</span>
    <span class="token class-name">int32_t</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">pack</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">foo</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">foo</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">foo_packed</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">foo_packed</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">foo_packed</span> f <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token char">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>which produces:</p>
<pre class="line-numbers language-sh" tabindex=0><code class=language-sh>$ gcc -Wcast-align<span class="token operator">=</span>strict <span class="token parameter variable">-fsanitize</span><span class="token operator">=</span>alignment alignof.c <span class="token operator">&amp;&amp;</span> ./a.out
_Alignof<span class="token punctuation">(</span>struct foo<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">4</span>
sizeof<span class="token punctuation">(</span>struct foo<span class="token punctuation">)</span>   <span class="token operator">=</span> <span class="token number">8</span>
_Alignof<span class="token punctuation">(</span>struct foo_packed<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span>
sizeof<span class="token punctuation">(</span>struct foo_packed<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">5</span>
f.b                  <span class="token operator">=</span> <span class="token number">1</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Notice that <code>f.b</code>, which is at offset 1 in the packed struct, is an unaligned
read of an <code>int32_t</code>, but the compiler and runtime sanitizer did not warn about it.
If you look at it in <a href=https://godbolt.org/z/fnzb11aMd>compiler explorer</a> with
an ARM32 compiler, you’ll notice that it gets tagged as “unaligned”:</p>
<pre><code>ldr     r3, [r7, #1]      @ unaligned
</code></pre>
<p>Here, <code>r7</code> contains the address of <code>f</code>, and we start reading the <code>int32_t</code>
from offset 1.</p>
<p>It seems odd to me that the runtime sanitizer did not flag this,
but perhaps this is by design.</p>
<p>As you might be able to tell, sending raw binary like this between computers
is wrought with peril. And that’s not even considering potential endianness
mismatches. It can work if you know what you’re doing.</p>
<p>Proceed with caution when using <code>#pragma pack(1)</code>, and only use it if you have
a good reason.</p>
<h2 id=6-you-might-need-to-manually-align-data-in-certain-scenarios>6: You might need to manually align data in certain scenarios</h2>
<p>Although standard alignment works most of the time, there are many scenarios
where you will need to align data even more strictly.</p>
<p>A few specific examples:</p>
<ul>
 <li>Hardware peripheral requires buffers to be 16-, 32-, or 64-byte aligned</li>
 <li>Placement of ARM interrupt vector table requires 128-byte alignment</li>
 <li>SIMD and SSE instructions require data to be 16-byte aligned</li>
 <li>Performance tuning by aligning data to the cache line size (e.g. 64 bytes)</li>
 <li>Eliminate <a href=https://stackoverflow.com/a/8469621>“false sharing”</a> contention in multi-core applications</li>
</ul>
<p>There are many other examples, but these are some of the most common.</p>
<h2 id=7-you-can-customize-the-alignment-of-data-at-compile-time>7: You can customize the alignment of data at compile time</h2>
<p>In C11, <code>_Alignas</code> was introduced, which provides a convenient way to specify
the alignment of a type or instance of type.</p>
<p>For example:</p>
<pre class="line-numbers language-c" tabindex=0><code class=language-c><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdint.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">EVAL_PRINT</span><span class="token expression"><span class="token punctuation">(</span>expr<span class="token punctuation">)</span> <span class="token function">printf</span><span class="token punctuation">(</span></span><span class="token string">"%-20s = %u\n"</span><span class="token expression"><span class="token punctuation">,</span> #expr<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">uint32_t</span><span class="token punctuation">)</span><span class="token punctuation">(</span>expr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>

<span class="token keyword">struct</span> <span class="token class-name">foo</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> a<span class="token punctuation">;</span>
    <span class="token class-name">int32_t</span> b<span class="token punctuation">;</span>
    <span class="token keyword">_Alignas</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token keyword">float</span> sse_data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">foo</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">foo</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">_Alignas</span><span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span> <span class="token keyword">struct</span> <span class="token class-name">foo</span> f<span class="token punctuation">;</span> <span class="token comment">// this instance has even stricter alignment</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">_Alignof</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">EVAL_PRINT</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>and the result:</p>
<pre><code>_Alignof(struct foo) = 16
sizeof(struct foo)   = 32
_Alignof(f)          = 2048
sizeof(f)            = 32
</code></pre>
<p>If you’re pre-C11, then you can use compiler extensions (e.g. for <code>gcc</code>):</p>
<pre class="line-numbers language-c" tabindex=0><code class=language-c><span class="token comment">// struct alignment</span>
<span class="token keyword">struct</span> <span class="token class-name">sse_data</span> <span class="token punctuation">{</span>
    <span class="token keyword">float</span> data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">__attribute__</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">aligned</span> <span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">foo</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> a<span class="token punctuation">;</span>
    <span class="token class-name">int32_t</span> b<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">sse_data</span> sse_data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// variable alignment</span>
<span class="token keyword">int</span> x <span class="token keyword">__attribute__</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">aligned</span> <span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id=8-you-cant-use-malloc-for-custom-alignments>8: You can’t use <code>malloc()</code> for custom alignments</h2>
<p>The only guarantee <code>malloc()</code> provides is that the memory will be aligned for
any built-in type, which typically is just the word size of the processor
(4 bytes on a 32-bit system).</p>
<p>If you need alignment beyond this, you will have to use a different allocator.</p>
<p>If you’re using C11 or later, then you can use the built-in <code>aligned_alloc</code>
function:</p>
<pre class="line-numbers language-c" tabindex=0><code class=language-c><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">aligned_alloc</span><span class="token punctuation">(</span><span class="token class-name">size_t</span> alignment<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span></span></code></pre>
<p>If you are using this, be aware that calling <code>realloc</code> on a pointer returned
from <code>aligned_alloc</code> is not guaranteed to have the same alignment, so it’s
better to <code>free</code> and call <code>aligned_alloc</code> again in that case.</p>
<p>If you’re not using C11, then you are on your own.
You will have to write a custom allocator (or use a third-party one).</p>
<p>Fortunately, it’s not too difficult to write your own version of <code>aligned_alloc</code>.
In fact, implementing <code>aligned_alloc</code> (and the corresponding <code>aligned_free</code>)
is a very popular interview question for embedded software engineers.</p>
<pre class="line-numbers language-c" tabindex=0><code class=language-c><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">aligned_alloc</span><span class="token punctuation">(</span><span class="token class-name">size_t</span> align<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span>  <span class="token function">aligned_free</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> ptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span></span></code></pre>
<p>A typical implementation will involve calling normal <code>malloc()</code>,
skipping to the next multiple of the requested alignment, then returning that
pointer instead. The tricky part is
that when <code>aligned_free()</code> is called, you need get the original pointer
that <code>malloc()</code> returned in order to call <code>free()</code>. There’s a technique where
you can store the original pointer just before the aligned pointer in memory.
This is a generally useful technique, but it comes up particularly often when
designing custom allocators.</p>
<h2 id=9-fast-power-of-2-alignment>9: Fast power-of-2 alignment</h2>
<p>If you’re writing your own custom allocator for alignment reasons, you’re
going to want to have a fast way to jump to the next alignment boundary (which
should always be a power of 2).</p>
<p>A simple, straightforward approach would look something like this (copied from
<a href=https://www.gingerbill.org/article/2019/02/08/memory-allocation-strategies-002/#aligning-a-memory-address>this great post</a>):</p>
<pre class="line-numbers language-c" tabindex=0><code class=language-c><span class="token class-name">uintptr_t</span> <span class="token function">align_forward</span><span class="token punctuation">(</span><span class="token class-name">uintptr_t</span> ptr<span class="token punctuation">,</span> <span class="token class-name">size_t</span> align<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">uintptr_t</span> p<span class="token punctuation">,</span> a<span class="token punctuation">,</span> modulo<span class="token punctuation">;</span>

    <span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">is_power_of_two</span><span class="token punctuation">(</span>align<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    p <span class="token operator">=</span> ptr<span class="token punctuation">;</span>
    a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">uintptr_t</span><span class="token punctuation">)</span>align<span class="token punctuation">;</span>
    <span class="token comment">// Same as (p % a) but faster as 'a' is a power of two</span>
    modulo <span class="token operator">=</span> p <span class="token operator">&amp;</span> <span class="token punctuation">(</span>a<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>modulo <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// If 'p' address is not aligned, push the address to the</span>
            <span class="token comment">// next value which is aligned</span>
            p <span class="token operator">+=</span> a <span class="token operator">-</span> modulo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>The only real issues with this are the branches that happen in the
<code>assert</code> and the <code>if</code> statement.</p>
<p>A more efficient way to implement this, which removes all branching, is:</p>
<pre class="line-numbers language-c" tabindex=0><code class=language-c><span class="token class-name">uintptr_t</span> <span class="token function">align_forward</span><span class="token punctuation">(</span><span class="token class-name">uintptr_t</span> ptr<span class="token punctuation">,</span> <span class="token class-name">size_t</span> align<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>ptr <span class="token operator">+</span> align <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token operator">~</span><span class="token punctuation">(</span>align <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden=true class=line-numbers-rows><span></span><span></span><span></span></span></code></pre>
<p>The second half of the statement (<code>&amp; ~(align -1)</code>) is rounding down to the
nearest multiple of <code>align</code> by setting the bottom bits to zeros.</p>
<p>The first half of the statement is a bit harder to understand.
For example purposes, assume align is <code>32</code> and consider the edge cases:</p>
<ul>
 <li><code>ptr</code> is already aligned: in this case, adding 31 to <code>ptr</code> and
 setting the bottom 5 bits to 0 returns the original value of <code>ptr</code>.</li>
 <li><code>ptr</code> is offset by 1 byte: in this case, when 31 is added, it bumps <code>ptr</code> up
exactly to the next multiple of <code>align</code>. Setting the bottom bits to zero has
no effect.</li>
 <li><code>ptr</code> is offset by 31 bytes: in this case, when 31 is added, it bumps <code>ptr</code>
 past the next multiple of <code>align</code> (next multiple + 30). Setting the bottom
 bits to 0 rounds it back down (remove the offset of 30).</li>
</ul>
<hr>
<p>References:</p>
<ul>
 <li><a href=https://en.wikipedia.org/wiki/Data_structure_alignment>https://en.wikipedia.org/wiki/Data_structure_alignment</a></li>
 <li><a href=https://www.kernel.org/doc/Documentation/unaligned-memory-access.txt>https://www.kernel.org/doc/Documentation/unaligned-memory-access.txt</a></li>
 <li><a href=https://www.gingerbill.org/series/memory-allocation-strategies/>https://www.gingerbill.org/series/memory-allocation-strategies/</a></li>
 <li><a href=https://www.gamedeveloper.com/programming/data-alignment-part-1>https://www.gamedeveloper.com/programming/data-alignment-part-1</a></li>
 <li><a href=https://www.gamedeveloper.com/programming/data-alignment-part-2-objects-on-the-heap-and-the-stack>https://www.gamedeveloper.com/programming/data-alignment-part-2-objects-on-the-heap-and-the-stack</a></li>
 <li><a href=https://embeddedartistry.com/blog/2017/02/22/generating-aligned-memory/>https://embeddedartistry.com/blog/2017/02/22/generating-aligned-memory/</a></li>
</ul>
 </div>
 
 
 
 <section id=isso-thread><h4>No Comments Yet</h4><div class=isso-postbox><div class=form-wrapper><div class=textarea-wrapper><div contenteditable=true class="textarea placeholder">Type Comment Here (at least 3 chars)</div><div class="preview sf-hidden"></div></div><section class=auth-section><p class=input-wrapper><input type=text name=author placeholder="Name (optional)" value><p class=input-wrapper><input type=email name=email placeholder="E-mail (optional)" value><p class=input-wrapper><input type=text name=website placeholder="Website (optional)" value><p class=post-action><input type=submit value=Submit><p class=post-action><input type=button name=preview value=Preview><p class=post-action><input type=button name=edit value=Edit class=sf-hidden></p></section><section class=notification-section style=display:none></section></div></div><div id=isso-root></div></section>
 <a class="u-url sf-hidden" href=https://ncmiller.dev/memory-alignment.html hidden></a>
</article>
 </div>
 </main><footer class="site-footer h-card">
 <data class=u-url href=/></data>
 <div class=wrapper>
 <div class=footer-col-wrapper>
 <div class=footer-col>
 <p class=feed-subscribe>
 <a href=https://ncmiller.dev/feed.xml>
 <svg class="svg-icon orange"><symbol id=rss fill-rule=evenodd clip-rule=evenodd stroke-linejoin=round stroke-miterlimit=1.414 viewBox="0 0 16 16"><path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194 11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0 13.806c0-1.21.983-2.195 2.194-2.195zM10.606 16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"></path>
</symbol>
 <use xlink:href=#rss></use>
 </svg><span>Subscribe</span>
 </a>
 </p>
 <ul class=contact-list>
 <li class=p-name>Nick Miller</li>
 <li><a class=u-email href=mailto:nick.miller.83@gmail.com>nick.miller.83@gmail.com</a></li>
 </ul>
 </div>
 <div class=footer-col>
 <p>My blog about computers, music, and life</p>
 </div>
 </div>
 <div class=social-links><ul class=social-media-list><li>
 <a rel=me href=https://github.com/ncmiller target=_blank title=github>
 <svg class="svg-icon grey"><symbol id=github fill-rule=evenodd clip-rule=evenodd stroke-linejoin=round stroke-miterlimit=1.414 viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.582 0 8c0 3.535 2.292 6.533 5.47 7.59.4.075.547-.172.547-.385 0-.19-.007-.693-.01-1.36-2.226.483-2.695-1.073-2.695-1.073-.364-.924-.89-1.17-.89-1.17-.725-.496.056-.486.056-.486.803.056 1.225.824 1.225.824.714 1.223 1.873.87 2.33.665.072-.517.278-.87.507-1.07-1.777-.2-3.644-.888-3.644-3.953 0-.873.31-1.587.823-2.147-.09-.202-.36-1.015.07-2.117 0 0 .67-.215 2.2.82.64-.178 1.32-.266 2-.27.68.004 1.36.092 2 .27 1.52-1.035 2.19-.82 2.19-.82.43 1.102.16 1.915.08 2.117.51.56.82 1.274.82 2.147 0 3.073-1.87 3.75-3.65 3.947.28.24.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.14.46.55.38C13.71 14.53 16 11.53 16 8c0-4.418-3.582-8-8-8"></path>
</symbol>
 <use xlink:href=#github></use>
 </svg>
 </a>
</li>
<li>
 <a rel=me href=https://www.linkedin.com/in/nicholas-miller-666a37b7 target=_blank title=linkedin>
 <svg class="svg-icon grey"><symbol id=linkedin fill-rule=evenodd clip-rule=evenodd stroke-linejoin=round stroke-miterlimit=1.414 viewBox="0 0 16 16"><path d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235 0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51v1.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4 0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762 0-1.376-.617-1.376-1.377 0-.758.614-1.375 1.376-1.375.76 0 1.376.617 1.376 1.375 0 .76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816 0H1.18C.528 0 0 .516 0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652 0 1.185-.516 1.185-1.153V1.153C16 .516 15.467 0 14.815 0z"></path>
</symbol>
 <use xlink:href=#linkedin></use>
 </svg>
 </a>
</li>
</ul>
</div>
 </div>
</footer>
